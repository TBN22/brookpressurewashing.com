! function(e) {
    var t = {};

    function n(o) {
        if (t[o]) return t[o].exports;
        var i = t[o] = {
            i: o,
            l: !1,
            exports: {}
        };
        return e[o].call(i.exports, i, i.exports, n), i.l = !0, i.exports
    }
    n.m = e, n.c = t, n.d = function(e, t, o) {
        n.o(e, t) || Object.defineProperty(e, t, {
            enumerable: !0,
            get: o
        })
    }, n.r = function(e) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }), Object.defineProperty(e, "__esModule", {
            value: !0
        })
    }, n.t = function(e, t) {
        if (1 & t && (e = n(e)), 8 & t) return e;
        if (4 & t && "object" == typeof e && e && e.__esModule) return e;
        var o = Object.create(null);
        if (n.r(o), Object.defineProperty(o, "default", {
                enumerable: !0,
                value: e
            }), 2 & t && "string" != typeof e)
            for (var i in e) n.d(o, i, function(t) {
                return e[t]
            }.bind(null, i));
        return o
    }, n.n = function(e) {
        var t = e && e.__esModule ? function() {
            return e.default
        } : function() {
            return e
        };
        return n.d(t, "a", t), t
    }, n.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }, n.p = "", n(n.s = 29)
}([function(e, t, n) {
    "use strict";
    var o = n(1);
    n.d(t, "g", (function() {
        return o.a
    })), n.d(t, "h", (function() {
        return o.b
    })), n.d(t, "i", (function() {
        return o.c
    })), n.d(t, "j", (function() {
        return o.d
    })), n.d(t, "k", (function() {
        return o.e
    })), n.d(t, "l", (function() {
        return o.f
    })), n.d(t, "o", (function() {
        return o.h
    })), n.d(t, "p", (function() {
        return o.k
    })), n.d(t, "q", (function() {
        return o.l
    }));
    var i = n(3);
    n.d(t, "a", (function() {
        return i.a
    })), n.d(t, "b", (function() {
        return i.b
    })), n.d(t, "c", (function() {
        return i.h
    })), n.d(t, "d", (function() {
        return i.i
    })), n.d(t, "e", (function() {
        return i.k
    })), n.d(t, "f", (function() {
        return i.n
    }));
    var r = n(8);
    n.d(t, "m", (function() {
        return r.a
    })), n.d(t, "n", (function() {
        return r.b
    }))
}, function(e, t, n) {
    "use strict";
    n.d(t, "d", (function() {
        return a
    })), n.d(t, "e", (function() {
        return c
    })), n.d(t, "h", (function() {
        return d
    })), n.d(t, "f", (function() {
        return l
    })), n.d(t, "k", (function() {
        return _
    })), n.d(t, "a", (function() {
        return u
    })), n.d(t, "c", (function() {
        return m
    })), n.d(t, "l", (function() {
        return b
    })), n.d(t, "b", (function() {
        return p
    })), n.d(t, "g", (function() {
        return f
    })), n.d(t, "i", (function() {
        return E
    })), n.d(t, "j", (function() {
        return h
    })), n.d(t, "m", (function() {
        return O
    }));
    const o = /\?(.+)/;

    function i(e) {
        const t = {},
            n = o.exec(e);
        if (n) {
            const e = n[1].split("&");
            for (const n of e) {
                const e = n.split("="),
                    o = e[0].toLowerCase();
                let i = e[1] || null;
                "false" !== i && "null" !== i && "0" !== i || (i = null), t[o] = i
            }
        }
        return t
    }
    const r = ["location", "locations"],
        s = ["tags", "tag"];

    function a(e) {
        return document.getElementById(e)
    }

    function c(e, t) {
        return t ? t.getElementsByClassName(e) : document.getElementsByClassName(e)
    }

    function d(e, t) {
        const n = e.toUpperCase();
        return t ? t.getElementsByTagName(n) : document.getElementsByTagName(n)
    }

    function l(e, t, n) {
        if (!e.parentNode) return null;
        const o = e;
        if (t && 0 === t.indexOf("#") && o.id && o.id === t.slice(1)) return o;
        if (t && o.classList && o.classList.contains(t)) return o;
        if (n && o.tagName === n) return o;
        const i = o.parentNode;
        return i && (i.classList || i.tagName) ? l(i, t, n) : null
    }

    function _({
        tag: e,
        parent: t,
        classes: n,
        content: o,
        options: i,
        style: r
    }) {
        const s = document.createElement(e.toUpperCase());
        if (n) {
            const e = n.constructor !== Array ? n.split(" ") : n;
            for (let t = 0; t < e.length; t++) e[t] && s.classList.add(e[t])
        }
        if (o && "string" == typeof o && (s.textContent = o), i)
            for (const e in i)
                if ("object" == typeof i[e]) {
                    s[e] || (s[e] = {});
                    for (const t in i[e]) s[e][t] = i[e][t]
                } else s[e] = i[e];
        if (r)
            for (const e in r) s.style[e] = r[e] || "";
        return t && t.appendChild(s), s
    }

    function u(e, t, n, o) {
        const i = e.constructor !== Array ? [e] : e;
        for (let e = 0; e < i.length; e++)
            if (i[e])
                if (i[e].addEventListener) i[e].addEventListener(t, n, o);
                else if (i[e].attachEvent) {
            const o = "e" + t + n,
                r = t + n;
            i[e][o] = n, i[e][r] = () => {
                i[e][o](window.event)
            }, i[e].attachEvent("on" + t, i[e][r])
        }
    }

    function m(e, t, n, o) {
        const i = c(e, o);
        for (let e = 0; e < i.length; e++) u(i[e], t, n)
    }

    function b({
        body: e,
        url: t,
        with_credentials: n = !1
    }) {
        return new Promise((o, i) => {
            (function({
                method: e,
                body: t,
                url: n,
                with_credentials: o = !1
            }) {
                return new Promise((i, r) => {
                    const s = window.XMLHttpRequest ? new XMLHttpRequest : new window.ActiveXObject("Microsoft.XMLHTTP");
                    s.open(e, n, !0), s.setRequestHeader("Content-Type", "application/json;charset=UTF-8"), o && (s.withCredentials = !0), s.onreadystatechange = function() {
                        if (4 === this.readyState && this.status && this.status <= 299) {
                            const e = this.responseText;
                            let t;
                            try {
                                t = JSON.parse(e)
                            } catch (e) {}
                            i(t)
                        } else 4 === this.readyState && r({
                            message: this.responseText || "Request failed",
                            statusCode: this.status || 500
                        })
                    }, s.send(JSON.stringify(t))
                })
            })({
                method: "POST",
                body: e,
                url: t,
                with_credentials: n
            }).then(o).catch(i)
        })
    }

    function p(e, t = !1) {
        const n = f(),
            o = {};
        for (const e in n) n[e] && r.includes(e) ? o["data-filter-location"] = decodeURIComponent(n[e]) : n[e] && s.includes(e) && (o["data-filter-tag"] = decodeURIComponent(n[e]));
        for (const t in e.attributes) {
            const n = isNaN(t) ? t : e.attributes[t];
            "string" != typeof n && (n.name && 0 === n.name.indexOf("data-") && !o[n.name] && (o[n.name] = "true" === n.value || (n.value || !0)))
        }
        if (t)
            for (const e in o)
                if (0 === e.indexOf("data-")) {
                    o[e.replace("data-", "")] = o[e], delete o[e]
                }
        return o
    }

    function f(e = document.URL) {
        return i(e)
    }

    function E() {
        return !!f(document.URL)["nicejob-debug"]
    }

    function h() {
        "undefined" != typeof JSON && JSON || (JSON = {}), JSON.stringify = JSON.stringify || JSON.toJSONString || JSON.serialize, JSON.parse = JSON.parse || JSON.parseJSON || JSON.deserialize
    }

    function O({
        el: e,
        from: t,
        to: n,
        horizontal: o = !1,
        other_axis_position: i = 0,
        dt: r = 200
    }) {
        const s = n - t,
            a = Date.now(),
            c = setInterval(() => {
                const d = Date.now() - a,
                    l = t + Math.round(s * function(e) {
                        if (e <= 0) return 0;
                        if (e >= 1) return 1;
                        return e < .5 ? 2 * e * e : 2 * (2 - e) * e - 1
                    }(d / r));
                o ? e.scrollTo(l, i) : e.scrollTo(i, l), (l === n || s > 0 && l >= n || s < 0 && l <= n || d > r) && (clearInterval(c), o ? e.scrollTo(n, i) : e.scrollTo(i, n))
            }, 20)
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "D", (function() {
        return o
    })), n.d(t, "b", (function() {
        return i
    })), n.d(t, "e", (function() {
        return r
    })), n.d(t, "j", (function() {
        return s
    })), n.d(t, "k", (function() {
        return a
    })), n.d(t, "l", (function() {
        return c
    })), n.d(t, "F", (function() {
        return d
    })), n.d(t, "C", (function() {
        return l
    })), n.d(t, "d", (function() {
        return _
    })), n.d(t, "i", (function() {
        return u
    })), n.d(t, "m", (function() {
        return m
    })), n.d(t, "G", (function() {
        return b
    })), n.d(t, "E", (function() {
        return f
    })), n.d(t, "a", (function() {
        return E
    })), n.d(t, "x", (function() {
        return h
    })), n.d(t, "A", (function() {
        return O
    })), n.d(t, "w", (function() {
        return g
    })), n.d(t, "v", (function() {
        return j
    })), n.d(t, "z", (function() {
        return A
    })), n.d(t, "r", (function() {
        return v
    })), n.d(t, "s", (function() {
        return R
    })), n.d(t, "u", (function() {
        return T
    })), n.d(t, "q", (function() {
        return w
    })), n.d(t, "t", (function() {
        return I
    })), n.d(t, "f", (function() {
        return L
    })), n.d(t, "g", (function() {
        return C
    })), n.d(t, "y", (function() {
        return N
    })), n.d(t, "B", (function() {
        return M
    })), n.d(t, "h", (function() {
        return S
    })), n.d(t, "p", (function() {
        return D
    })), n.d(t, "o", (function() {
        return y
    })), n.d(t, "n", (function() {
        return P
    })), n.d(t, "c", (function() {
        return U
    }));
    const o = "STORIES",
        i = "FEATURED_STORY",
        r = "LEAD_FORM",
        s = "RECOMMENDATION",
        a = "REFERRAL_LEAD_FORM",
        c = "REVIEW_FORM",
        d = "TRUST_BADGE",
        l = "SOCIAL_PROOF",
        _ = "GOALS",
        u = "NICEJOB_REVIEW_FORM",
        m = "nj-review",
        b = {
            [o]: {
                classes: ["nj-stories", "nj-story", "nicejob-stories"],
                loading: !0
            },
            [i]: {
                classes: ["nj-featured-story"],
                loading: !0
            },
            [r]: {
                classes: ["nj-lead", "h-lead"],
                method: "SIBLING"
            },
            [s]: {
                classes: ["nj-recommendation", "nj-recommend"],
                method: "SIBLING"
            },
            [c]: {
                classes: [m, "n-review"],
                method: "SIBLING"
            },
            [d]: {
                classes: ["nj-badge", "nicejob-badge"],
                loading: !0
            },
            [l]: {
                classes: ["nj-social-proof", "nj-engage"]
            },
            [_]: {
                classes: ["nj-goals"],
                loading: !0
            },
            [a]: {
                classes: ["nj-referral-lead-form"],
                method: "SIBLING"
            }
        };
    let p = [];
    for (const e in b) p = [...p, ...b[e].classes];
    const f = "data-nj-tracking-metadata",
        E = "nj-click",
        h = "/sdk/init",
        O = "/sdk/widgets",
        g = "/sdk/ev",
        j = "/sdk/e",
        A = "/sdk/widgets/more_stories",
        v = "/sdk/widgets/create_recommendation",
        R = "/sdk/widgets/create_referral_from_person",
        T = "/sdk/widgets/create_review",
        w = "/sdk/widgets/create_lead",
        I = "/sdk/widgets/create_referral_lead",
        L = "data-force-nj-lead",
        C = "data-network";
    var k;
    ! function(e) {
        e.REFERRAL_LEAD_IS_A_CUSTOMER = "REFERRAL_LEAD_IS_A_CUSTOMER"
    }(k || (k = {}));
    const N = "nj-redirect",
        M = "__public_key__",
        S = "lrlf",
        D = "data-sid",
        y = "data-pid",
        P = "data-csrf",
        U = "__global_metadata__"
}, function(e, t, n) {
    "use strict";
    n.d(t, "m", (function() {
        return o
    })), n.d(t, "j", (function() {
        return i
    })), n.d(t, "i", (function() {
        return r
    })), n.d(t, "n", (function() {
        return s
    })), n.d(t, "b", (function() {
        return a
    })), n.d(t, "h", (function() {
        return c
    })), n.d(t, "e", (function() {
        return d
    })), n.d(t, "d", (function() {
        return l
    })), n.d(t, "c", (function() {
        return _
    })), n.d(t, "f", (function() {
        return u
    })), n.d(t, "g", (function() {
        return m
    })), n.d(t, "l", (function() {
        return b
    })), n.d(t, "k", (function() {
        return p
    })), n.d(t, "a", (function() {
        return f
    })), n.d(t, "o", (function() {
        return E
    }));
    const o = 0 !== document.URL.indexOf("http://localhost"),
        i = "javascript:void(0)",
        r = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,
        s = /^[+]*[(]{0,1}[0-9]{1,3}[)]{0,1}[-\s\./0-9]*$/,
        a = "data-nj-element-handled",
        c = "data-related-modal",
        d = "data-lead-form-disable",
        l = "data-lead-form-custom-href",
        _ = "data-install-time",
        u = "data-loaded-time",
        m = "data-metadata",
        b = "nj--widget-loading",
        p = "nj-background_loading_gif",
        f = "nj--auto-open",
        E = 2
}, function(e, t, n) {
    "use strict";
    var o;
    n.d(t, "a", (function() {
            return o
        })),
        function(e) {
            e.view = "view", e.click = "click", e.webform = "webform", e.pageview = "pageview"
        }(o || (o = {}))
}, function(e, t, n) {
    "use strict";
    n.d(t, "b", (function() {
        return s
    })), n.d(t, "c", (function() {
        return a
    })), n.d(t, "a", (function() {
        return c
    }));
    var o = n(2),
        i = n(1),
        r = n(3);

    function s(e, t) {
        const n = e.tagName ? e : e.currentTarget || e.target,
            o = Object(i.f)(n, "nj-modal-bg");
        if (!o) throw new Error("openModalCard modal not found");
        const r = Object(i.e)("nj-modal-card", o),
            s = t || n.getAttribute("data-modal-card") || "",
            a = Object(i.e)(s, o)[0];
        for (const e of r) e.classList.add("hide");
        return a.classList.remove("hide"), a
    }

    function a(e) {
        const t = e,
            n = e;
        t.preventDefault && t.preventDefault();
        const o = n.tagName ? n : t.currentTarget || t.target,
            s = o.getAttribute(r.h) || "",
            a = Object(i.d)(s);
        if (!a) return void console.error("openModalOnClick: Related modal not found for", o);
        const c = Object(i.e)("nj-modal-bg", a)[0];
        c && c.classList.remove("hide")
    }

    function c({
        form: e,
        error: t = "",
        reset: n = !1,
        modal: r
    }) {
        const s = e === o.l ? "e__nj--review-error" : e === o.e ? "e__nj--lead-error" : e === o.j + "--from" ? "e__nj--recommendation-from-error" : e === o.j + "--to" ? "e__nj--recommendation-to-error" : e === o.k + "--email" ? "e__nj--referral-lead-email-error" : e === o.k + "--phone" ? "e__nj--referral-lead-phone-error" : e === o.k + "--name" ? "e__nj--referral-lead-name-error" : e === o.k + "--customer" ? "e__nj--referral-lead-customer-error" : null,
            a = s && Object(i.e)(s, r)[0];
        if (!a) return console.error("formError: no link!", {
            form: e,
            error: t,
            reset: n,
            modal: r
        });
        const c = Object(i.f)(a, "nj-section-alert");
        if (!c) return console.error("formError: no alert!", {
            form: e,
            error: t,
            reset: n,
            modal: r,
            link: a
        });
        !n && t ? (a.textContent = t, c.classList.remove("hide")) : c.classList.add("hide")
    }
}, function(e, t, n) {
    "use strict";

    function o({
        language: e,
        namespace: t,
        key: n,
        params: o
    }) {
        const i = {
            en: {
                common: {
                    email_validation: "Please enter a valid email address",
                    phone_validation: "Please enter a valid phone number",
                    name_validation: "Please enter your name",
                    review_validation: "Please enter a star rating, a review, your name, and your email address",
                    submit_error: "There was an error on our end. Please try again!",
                    poor: "POOR",
                    fair: "FAIR",
                    good: "GOOD",
                    very_good: "VERY GOOD",
                    outstanding: "OUTSTANDING",
                    youre_awesome: "You're awesome"
                },
                lead: {
                    name_validation: "Please enter a value for " + (null == o ? void 0 : o.name)
                },
                recommendation: {
                    name_validation: "Please enter a name."
                },
                reviews: {
                    review_groove: "Now that you're in that review groove, you can also write us a review on...",
                    select_star: "Please select a star rating"
                },
                referral_lead_form: {
                    thank_you_text: `Thank you ${null==o?void 0:o.name}! We will reach out shortly`,
                    customer_error: "A customer already exists for this email address"
                }
            },
            fr: {
                common: {
                    email_validation: "S'il vous plaît, mettez un courriel valid",
                    phone_validation: "S'il vous plaît, mettez un numero de telephone valid",
                    name_validation: "S'il vous plaît, mettez votre nom",
                    review_validation: "S'il vous plaît, mettez une évaluation, un avis, votre nom et votre courriel",
                    submit_error: "Une erreur s'est produite de notre côté. Veuillez réessayer!",
                    poor: "PAUVRE",
                    fair: "PASSABLE",
                    good: "BIEN",
                    very_good: "TRÈS BIEN",
                    outstanding: "REMARQUABLE",
                    youre_awesome: "Vous êtes génial"
                },
                lead: {
                    name_validation: "Veuillez entrer une valeur pour " + (null == o ? void 0 : o.name)
                },
                recommendation: {
                    name_validation: "Veuillez entrer un nom."
                },
                reviews: {
                    review_groove: "Maintenant que vous êtes dans cette veine de révision, vous pouvez également nous écrire une avis sur...",
                    select_star: "Sélectionnez une note en étoile"
                },
                referral_lead_form: {
                    thank_you_text: `Merci ${null==o?void 0:o.name}! Nous vous contacterons sous pue`,
                    customer_error: "Un client existe déjà pour cette adresse email"
                }
            }
        }[e][t][n];
        if (!i) throw new Error(`Copy not found for ${e}.${t}.${n}`);
        return i
    }
    n.d(t, "a", (function() {
        return o
    }))
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return i
    }));
    var o = n(3);

    function i(e) {
        const t = e.getAttribute(o.g) || "{}";
        try {
            return JSON.parse(t)
        } catch (e) {
            return {}
        }
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return _
    })), n.d(t, "c", (function() {
        return u
    })), n.d(t, "b", (function() {
        return m
    }));
    var o = n(1),
        i = n(3);
    const r = /^(http|https):\/\/([^\/]+?)\/js\/(sdk|sdk\.min|sdk\.min\.\d+)?\.js\?(id=|.+?&id=)[A-Za-z0-9-_]+?($|&)/,
        s = /^(http):\/\/(localhost:[0-9]+)\/sdk\.min\.js\?(id=|.*&id=)([A-Za-z0-9-_]+?)($|&)/,
        a = /(^|\.)(nicejob\.(co|com)|reviewly\.io)$/;

    function c() {
        const e = Object(o.h)("SCRIPT");
        for (const t of e) {
            const {
                src: e = ""
            } = t, n = i.m ? r.exec(e) : s.exec(e) || r.exec(e);
            if (n) {
                const o = n[2];
                if (i.m && !a.test(o)) {
                    console.warn("src pattern rejected:", e, n);
                    continue
                }
                return t
            }
        }
        return null
    }
    var d = n(2);
    const l = Object(o.i)();

    function _() {
        const e = c();
        if (!e) throw new Error("getSDKInfo: script not found");
        const {
            src: t
        } = e, n = i.m ? r.exec(t) : s.exec(t) || r.exec(t), a = n && n[2] || "", l = Object(o.g)(t), _ = l.id, u = "string" == typeof window.NICEJOB_REDIRECT_URL && window.NICEJOB_REDIRECT_URL ? window.NICEJOB_REDIRECT_URL : l.redirect && decodeURIComponent(l.redirect) || null, m = l.domain ? decodeURIComponent(l.domain).replace("8093", "8095") : i.m ? "https://api.nicejob.co" : "http://localhost:8095", b = document.referrer || decodeURIComponent(l.ref || ""), p = u ? `${m}${d.x}?${d.y}=1` : `${m}${d.x}`, f = `${m}${d.A}`, E = `${m}${d.w}`, h = `${m}${d.v}`, O = `${m}${d.z}`, g = `${m}${d.r}`, j = `${m}${d.u}`, A = `${m}${d.q}`, v = `${m}${d.t}`, R = `${m}${d.s}`;
        return {
            company_id: _,
            redirect_url: u,
            domain: m,
            referrer: b,
            reviewly: a.includes("reviewly.io"),
            SDK_INIT_URL: p,
            SDK_LOAD_URL: f,
            SDK_EVENT_URL: E,
            SDK_DEPRECATED_EVENT_URL: h,
            SDK_LOAD_MORE_URL: O,
            SDK_CREATE_RECOMMENDATION_URL: g,
            SDK_CREATE_REFERRAL_FROM_PERSON_URL: R,
            SDK_CREATE_REVIEW_URL: j,
            SDK_CREATE_LEAD_URL: A,
            SDK_CREATE_REFERRAL_LEAD_URL: v
        }
    }

    function u({
        session_id: e,
        pageview_id: t,
        csrf_token: n
    }) {
        const o = c();
        if (!o) throw new Error("setSDKSessionData: script not found");
        o.setAttribute(d.p, e), o.setAttribute(d.o, t), o.setAttribute(d.n, n), l && console.log("NiceJob debug: SDK session ready.")
    }

    function m() {
        const e = c();
        if (!e) throw new Error("getSDKSessionData: script not found");
        return {
            session_id: e.getAttribute(d.p) || "",
            pageview_id: e.getAttribute(d.o) || "",
            csrf_token: e.getAttribute(d.n) || ""
        }
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return s
    }));
    var o = n(2),
        i = n(4),
        r = n(15);
    class s {
        constructor(e, t, n, o) {
            this.NiceJob = n, this.parent = e, this.event_metadata = t, this.widget_name = o
        }
        sendViewOnLoad() {
            const e = o.G[this.widget_name].classes.find(e => this.parent.classList.contains(e)) || null,
                t = { ...Object(r.a)(this.event_metadata),
                    nj_widget_class: e,
                    type: "LOAD"
                },
                n = Object(r.b)(this.parent);
            n && (t.load_time = n), this.NiceJob.send(i.a.view, {
                element: this.parent,
                metadata: t
            })
        }
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "b", (function() {
        return s
    })), n.d(t, "c", (function() {
        return a
    })), n.d(t, "a", (function() {
        return c
    }));
    var o = n(2),
        i = n(1),
        r = n(3);

    function s(e = !1) {
        const t = [];
        for (const n in o.G) {
            const s = n;
            for (const n of o.G[s].classes) {
                const o = Object(i.e)(n);
                if (o.length)
                    for (const n of o) {
                        if (e && n.hasAttribute(r.b)) continue;
                        const o = Object(i.b)(n);
                        let a = "" + s;
                        for (const e in o) a += `.${e}=${o[e]}`;
                        t.push({
                            element: n,
                            request: {
                                id: a,
                                widget: s,
                                dataset: o
                            }
                        })
                    }
            }
        }
        return t
    }

    function a(e) {
        const {
            element: t,
            request: n
        } = e;
        if (!n || !t || t.getAttribute(r.b)) return;
        const {
            widget: i,
            dataset: s
        } = n;
        t.setAttribute(r.b, "true"), t.setAttribute(r.c, Date.now().toString()), c(t, i), i !== o.e || s[o.f] && s[o.g] && "responsibid" !== s[o.g] || t.classList.add("responsibid-lightbox-button")
    }

    function c(e, t) {
        e.hasAttribute("data-nj-loading") || (o.G[t].loading && Object(i.k)({
            tag: "DIV",
            parent: e,
            classes: r.l,
            style: {
                backgroundImage: "url('https://cdn.nicejob.co/assets/button-loading.gif')",
                backgroundRepeat: "no-repeat",
                backgroundPosition: "center center",
                backgroundSize: "32px auto",
                width: "100%",
                minWidth: "40px",
                height: "40px"
            }
        }), e.setAttribute("data-nj-loading", "1"))
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return r
    }));
    var o = n(14),
        i = n(0);

    function r(e) {
        const t = Object(i.k)("nj--widget--content", e);
        return t && t[0] && t[0].getAttribute("data-lang") ? t[0].getAttribute("data-lang") : (console.error(`getLang: Could not get target element from widget. Returning default language "${o.a}"`), o.a)
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return o
    }));
    const o = {
        APP_LOGO: {
            MAX_WIDTH: 480,
            MAX_HEIGHT: 480,
            MIN_WIDTH: 250,
            MIN_HEIGHT: 250,
            MAX_ASPECT_RATIO: 1,
            MIN_ASPECT_RATIO: 1,
            FIT: "pad"
        },
        AVATAR: {
            MAX_WIDTH: 200,
            MAX_HEIGHT: 200,
            MIN_WIDTH: 50,
            MIN_HEIGHT: 50,
            MAX_ASPECT_RATIO: 1,
            MIN_ASPECT_RATIO: 1,
            FIT: "trim"
        },
        FACEBOOK: {
            MAX_WIDTH: 1200,
            MAX_HEIGHT: 630,
            MIN_WIDTH: 600,
            MIN_HEIGHT: 315,
            MAX_ASPECT_RATIO: 1.91,
            MIN_ASPECT_RATIO: 1.91,
            FIT: "pad"
        },
        FAV_ICON: {
            WIDTH: 32,
            HEIGHT: 32,
            MIN_WIDTH: 0,
            MAX_WIDTH: 1 / 0,
            MIN_HEIGHT: 0,
            MAX_HEIGHT: 1 / 0,
            MAX_ASPECT_RATIO: 1,
            MIN_ASPECT_RATIO: 1,
            FIT: "pad"
        },
        IOS_ICON: {
            WIDTH: 120,
            HEIGHT: 120,
            MIN_WIDTH: 0,
            MAX_WIDTH: 1 / 0,
            MIN_HEIGHT: 0,
            MAX_HEIGHT: 1 / 0,
            MAX_ASPECT_RATIO: 1,
            MIN_ASPECT_RATIO: 1,
            FIT: "pad"
        },
        LOGO: {
            MAX_WIDTH: 800,
            MAX_HEIGHT: 800,
            MIN_WIDTH: 160,
            MIN_HEIGHT: 160,
            MAX_ASPECT_RATIO: 10,
            MIN_ASPECT_RATIO: .1,
            FIT: "pad"
        },
        POWERED_BY_LOGO: {
            WIDTH: 32,
            HEIGHT: 32,
            MIN_HEIGHT: 0,
            MAX_HEIGHT: 1 / 0,
            MIN_WIDTH: 0,
            MAX_WIDTH: 1 / 0,
            MAX_ASPECT_RATIO: 1,
            MIN_ASPECT_RATIO: 1,
            FIT: "pad"
        },
        PROFILE: {
            MAX_WIDTH: 800,
            MAX_HEIGHT: 800,
            MIN_WIDTH: 480,
            MIN_HEIGHT: 480,
            MAX_ASPECT_RATIO: 1,
            MIN_ASPECT_RATIO: 1,
            FIT: "pad"
        },
        STORY: {
            MAX_WIDTH: 1080,
            MAX_HEIGHT: 1080,
            MIN_WIDTH: 360,
            MIN_HEIGHT: 360,
            MAX_ASPECT_RATIO: 1.78,
            MIN_ASPECT_RATIO: .5625,
            FIT: "trim"
        },
        CONTENT: {
            MAX_WIDTH: 1080,
            MAX_HEIGHT: 1080,
            MIN_WIDTH: 0,
            MIN_HEIGHT: 0,
            MAX_ASPECT_RATIO: 1.78,
            MIN_ASPECT_RATIO: .5625,
            FIT: "trim"
        }
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return c
    }));
    var o = n(16),
        i = n(1),
        r = n(8);
    const s = ["name", "filename", "description"],
        a = ["accelerometer", "ambient-light-sensor", "background-sync", "bluetooth", "camera", "clipboard", "device-info", "geolocation", "gyroscope", "magnetometer", "microphone", "midi", "notifications", "persistent-storage", "push", "speaker"];

    function c() {
        var e;
        const t = {
            ow: window.screen.width,
            oh: window.screen.height,
            nav: {},
            nav_props: [],
            p: l(),
            tz: (new Date).getTimezoneOffset(),
            canvas: []
        };
        for (const e in window.navigator) {
            t.nav_props.push(e);
            const n = window.navigator[e];
            if (["string", "number", "boolean"].includes(typeof n) || !n) t.nav[e] = n;
            else if ("plugins" === e) {
                t.nav.plugins = [];
                for (let n = 0; n < window.navigator[e].length; n++) {
                    const o = window.navigator[e][n],
                        i = [];
                    for (const e of s) i.push(o[e]);
                    t.nav.plugins.push(i.join("."))
                }
            } else "languages" === e && Array.isArray(n) && (t.nav[e] = n.join(","))
        }
        t.nav_props.sort((e, t) => e.localeCompare(t));
        const n = document.createElement("canvas"),
            a = n.getContext("webgl") || n.getContext("experimental-webgl");
        t.webgl = a && a.getSupportedExtensions ? a.getSupportedExtensions() : [];
        const c = Object(o.a)(JSON.stringify(t), "nj-key-v1"),
            {
                referrer: _
            } = Object(r.a)();
        return {
            d: d(),
            u: c,
            l: document.URL || (null === (e = window.location) || void 0 === e ? void 0 : e.href) || "",
            q: Object(i.g)(),
            r: _
        }
    }

    function d() {
        const e = {
                screen_width: window.screen.width,
                screen_height: window.screen.height,
                language: window.navigator.language,
                tzo: (new Date).getTimezoneOffset()
            },
            t = JSON.stringify(e);
        return "function" == typeof btoa ? btoa(t) : t
    }

    function l() {
        const e = {};
        if (navigator.permissions && "object" == typeof navigator.permissions)
            for (const t of a) navigator.permissions.query({
                name: t
            }).then(n => {
                e[t] = n.state
            }).catch(() => e[t] = "error");
        return e
    }
}, function(e, t, n) {
    "use strict";
    var o, i, r, s, a, c, d;
    n.d(t, "a", (function() {
            return Y
        })), n.d(t, "b", (function() {
            return z
        })),
        function(e) {
            e.ADDITIONAL_BILLING_FIELDS_POSTCODE = "additional-billing-fields-postcode", e.AI_SITES = "ai-sites", e.ALLOW_EMAIL_LINKS = "allow-email-links", e.ALLOW_SMS_LINKS = "allow-sms-links", e.BLOCK_BACKFILL_IMPORTS = "block-backfill-imports", e.BLOCK_SIGNUP = "block-signup", e.CAMPAIGNS_V2_OBJECTIVE_BOOKINGS = "campaigns-v2-objective-bookings", e.CAMPAIGNS_V2_UNSUBSCRIBE_COLUMN = "campaigns-v2-unsubscribe-column", e.CAMPAIGNS_V2_CUSTOM_CAMPAIGNS = "campaigns-v2-custom-campaigns", e.COMPANYCAM_INTEGRATION = "companycam-integration", e.COMPANY_IS_VERIFIED = "company-is-verified", e.CUSTOMER_MATCH_VERSION = "customer-match-version", e.GIFT_CAMPAIGN_PHASE_0 = "gift-campaign-phase-0", e.GOALS = "goals", e.INVITE_PAST_CUSTOMERS_OPPORTUNITY = "invite-past-customers-opportunity", e.LOGIN_WITH_GOOGLE = "login-with-google", e.NEW_CONDITIONAL_PERSON_DELETION = "new-conditional-person-deletion-logic", e.SNIPPET_MODEL = "snippet-model", e.ONBOARDING = "onboarding", e.ONBOARDING_CACHE_MANIPULATION = "onboarding-cache-manipulation", e.ONBOARDING_INITIAL_REDIRECT = "onboarding-initial-redirect", e.PAYMENTS_EXPLORE_REVIEWS = "payments-explore-reviews", e.PAYSTONE_PAYMENTS = "paystone-payments", e.PEOPLE_SEGMENTS = "people-segments", e.RECOMMENDATION_LEAD_ALERT = "recommendation-lead-alert", e.RECOMMENDATIONS = "recommendations", e.REFERRAL_RATE_BIG_QUERY = "referral-rate-big-query", e.SPLIT_TEST_APP_CARD = "split-test-app-card", e.USE_SUGARWISH_TEST_ACCOUNT_IN_PRODUCTION = "use-sugarwish-test-account-in-production", e.USE_NEW_JOBBER_EVENTS = "use-new-jobber-events", e.JOBBER_CUSTOM_FIELD = "jobber-custom-field", e.SEND_TEST_MESSAGE = "send-test-message"
        }(o || (o = {})),
        function(e) {
            e.REFERRAL_ENHANCEMENTS = "split-test-referral-enhancements"
        }(i || (i = {})),
        function(e) {
            e.BLOCK = "BLOCK", e.NOTIFY = "NOTIFY", e.ALLOW = "ALLOW"
        }(r || (r = {})),
        function(e) {
            e.V1 = "ionian", e.V2 = "dorian", e.V3 = "phrygian", e.V4 = "lydian", e.V5 = "mixolydian", e.V7 = "aeolian", e.V8 = "locrian"
        }(s || (s = {})),
        function(e) {
            e.V1 = "unison", e.V2 = "minor_second", e.V3 = "major_second", e.V4 = "minor_third", e.V5 = "major_third", e.V6 = "perfect_fourth", e.V7 = "tritone", e.V8 = "perfect_fifth", e.V9 = "minor_sixth", e.V10 = "major_sixth", e.V11 = "minor_seventh", e.V12 = "major_seventh", e.V13 = "octave", e.V14 = "compound_minor_second", e.V15 = "compound_major_second", e.V16 = "compound_minor_third", e.V17 = "compound_major_third", e.V18 = "compound_perfect_fourth", e.V19 = "compound_tritone", e.V20 = "compound_perfect_fifth", e.V21 = "compound_minor_sixth", e.V22 = "compound_major_sixth", e.V23 = "compound_minor_seventh", e.V24 = "compound_major_seventh", e.V25 = "double_octave"
        }(a || (a = {})),
        function(e) {
            e.reviews = "reviews", e.convert = "convert", e.convert_landing_pages = "convert_landing_pages"
        }(c || (c = {})),
        function(e) {
            e.FREE = "FREE", e.LITE = "LITE", e.STANDARD = "STANDARD", e.PRO = "PRO", e.PARTNER = "PARTNER"
        }(d || (d = {}));
    d.LITE, d.STANDARD, d.PRO;
    var l, _, u, m, b;
    ! function(e) {
        e.Free = "Free", e.Legacy = "Legacy", e["2019-01"] = "2019-01", e["2019-09"] = "2019-09", e["2020-11"] = "2020-11", e["2023-08"] = "2023-08"
    }(l || (l = {})),
    function(e) {
        e.SDK = "SDK", e.API = "API", e.MESSAGE = "MESSAGE", e.SHARE = "SHARE"
    }(_ || (_ = {})),
    function(e) {
        e.OAUTH_CLIENT_CREDENTIALS = "OAUTH_CLIENT_CREDENTIALS", e.OAUTH_AUTHORIZATION_CODE = "OAUTH_AUTHORIZATION_CODE", e.API_KEY = "API_KEY", e.MINDBODY = "MINDBODY"
    }(u || (u = {})),
    function(e) {
        e.ONE_DAY = "1 days", e.SIX_MONTHS = "180 days"
    }(m || (m = {})),
    function(e) {
        e.REVIEWS = "REVIEWS", e.RECOMMENDATIONS = "RECOMMENDATIONS", e.EMPLOYEE_REVIEWS = "EMPLOYEE_REVIEWS", e.ENGAGEMENT = "ENGAGEMENT", e.BOOKINGS = "BOOKINGS", e.WELCOME_NEW_CUSTOMERS = "WELCOME_NEW_CUSTOMERS", e.REWARD_LOYAL_CUSTOMERS = "REWARD_LOYAL_CUSTOMERS"
    }(b || (b = {}));
    b.WELCOME_NEW_CUSTOMERS, b.REWARD_LOYAL_CUSTOMERS;
    var p, f, E, h, O, g, j, A, v, R, T, w, I, L, C, k, N, M, S, D, y, P, U, x, B, H, G, W, V, J, F, K, q;
    ! function(e) {
        e.GREATER_THAN_OR_EQUAL_TO = "GREATER_THAN_OR_EQUAL_TO", e.GREATER_THAN = "GREATER_THAN", e.EQUAL_TO = "EQUAL_TO", e.LESS_THAN = "LESS_THAN", e.LESS_THAN_OR_EQUAL_TO = "LESS_THAN_OR_EQUAL_TO", e.NOT_EQUAL_TO = "NOT_EQUAL_TO", e.CONTAINS = "CONTAINS", e.DOES_NOT_CONTAIN = "DOES_NOT_CONTAIN", e.IS_WITHIN_THE_LAST = "IS_WITHIN_THE_LAST", e.IS_BEYOND_THE_LAST = "IS_BEYOND_THE_LAST", e.IS_AFTER = "IS_AFTER", e.IS_BEFORE = "IS_BEFORE"
    }(p || (p = {})),
    function(e) {
        e.Person = "Person", e.Story = "Story", e.Employee = "Employee", e.User = "User"
    }(f || (f = {})),
    function(e) {
        e.SUM = "SUM", e.MEAN = "MEAN", e.MEDIAN = "MEDIAN", e.MODE = "MODE"
    }(E || (E = {})),
    function(e) {
        e.SINGLE = "SINGLE", e.AGGREGATE = "AGGREGATE"
    }(h || (h = {})),
    function(e) {
        e.REVIEW_CAMPAIGN_HERO_TESTIMONIAL = "review_campaign_hero_testimonial", e.COMPANY_SETUP = "company_setup"
    }(O || (O = {})),
    function(e) {
        e.REVIEW_SOURCES = "review_sources", e.APPS = "apps", e.INVITE_PAST_CUSTOMERS = "invite_past_customers"
    }(g || (g = {})),
    function(e) {
        e.pending = "pending", e.open = "open", e.closed = "closed"
    }(j || (j = {})),
    function(e) {
        e.ACTIVE = "ACTIVE", e.INACTIVE = "INACTIVE"
    }(A || (A = {})),
    function(e) {
        e.EMAIL = "EMAIL", e.SMS = "SMS", e.DEFAULT = "DEFAULT", e.ALL = "ALL"
    }(v || (v = {})),
    function(e) {
        e.CASE_CREATED = "CASE_CREATED", e.CONVERSATION_CREATED = "CONVERSATION_CREATED", e.INVOICE_CREATED = "INVOICE_CREATED", e.JOB_CREATED = "JOB_CREATED", e.LEAD_FORM_CREATED = "LEAD_FORM_CREATED", e.MANUAL_CAMPAIGN_ENROLLMENT_CREATED = "MANUAL_CAMPAIGN_ENROLLMENT_CREATED", e.MESSAGE_CREATED = "MESSAGE_CREATED", e.PAYMENT_CREATED = "PAYMENT_CREATED", e.PERSON_CREATED = "PERSON_CREATED", e.PERSON_CREATED_VIA_IMPORT = "PERSON_CREATED_VIA_IMPORT", e.PERSON_CREATED_VIA_INVITE = "PERSON_CREATED_VIA_INVITE", e.PROPOSAL_CREATED = "PROPOSAL_CREATED", e.UNSUBSCRIBED = "UNSUBSCRIBED", e.VISIT_CREATED = "VISIT_CREATED"
    }(R || (R = {})),
    function(e) {
        e.REJECTED = "REJECTED", e.IMPLIED = "IMPLIED", e.EXPRESS = "EXPRESS"
    }(T || (T = {})),
    function(e) {
        e.open = "open", e.closed = "closed", e.snoozed = "snoozed"
    }(w || (w = {})),
    function(e) {
        e.CALL_CREATED = "CALL_CREATED", e.LEAD_FORM_CREATED = "LEAD_FORM_CREATED", e.REVIEW_CREATED = "REVIEW_CREATED", e.RECOMMENDATION_CREATED = "RECOMMENDATION_CREATED"
    }(I || (I = {})),
    function(e) {
        e.DRAFT = "draft", e.OPEN = "open", e.PAID = "paid", e.UNCOLLECTIBLE = "uncollectible", e.VOID = "void"
    }(L || (L = {})),
    function(e) {
        e.READY = "READY", e.BUILDING = "BUILDING", e.LAUNCHING = "LAUNCHING", e.LAUNCHED = "LAUNCHED"
    }(C || (C = {})),
    function(e) {
        e.LOGIN = "LOGIN", e.SIGN_UP = "SIGN_UP"
    }(k || (k = {})),
    function(e) {
        e.PAYSTONE_HUB = "paystone_hub"
    }(N || (N = {})),
    function(e) {
        e.EN = "en", e.FR = "fr"
    }(M || (M = {})),
    function(e) {
        e.USER = "user", e.COMPANY = "company"
    }(S || (S = {})),
    function(e) {
        e.AVATAR = "AVATAR", e.APP_LOGO = "APP_LOGO", e.FAV_ICON = "FAV_ICON", e.IOS_ICON = "IOS_ICON", e.LOGO = "LOGO", e.POWERED_BY_LOGO = "POWERED_BY_LOGO", e.PROFILE = "PROFILE", e.STORY = "STORY", e.CONTENT = "CONTENT"
    }(D || (D = {})),
    function(e) {
        e.EMAIL = "EMAIL", e.SMS = "SMS"
    }(y || (y = {})),
    function(e) {
        e.ACCULYNX = "acculynx", e.BBB = "bbb", e.CAPTERRA = "capterra", e.CITYSEARCH = "citysearch", e.CLIO = "clio", e.COMPANYCAM = "companycam", e.CONVERT_LABS = "convert_labs", e.DATACANDY = "datacandy", e.DRCHRONO = "drchrono", e.FACEBOOK = "facebook", e.FIELDPULSE = "fieldpulse", e.FRESHBOOKS = "freshbooks", e.G2 = "g2", e.GOOGLE = "google", e.GOOGLE_RSV = "google-rsv", e.HOMEADVISOR = "homeadvisor", e.HOMESTARS = "homestars", e.HOUSECALLPRO = "housecallpro", e.HUBSPOT = "hubspot", e.INSTAGRAM = "instagram", e.INTERCOM = "intercom", e.JOBBER = "jobber", e.JOBBER_V2 = "jobber_v2", e.JOB_TREAD = "job_tread", e.LIBRO = "libro", e.LINKEDIN = "linkedin", e.MARKATE = "markate", e.MINDBODY = "mindbody", e.NICEJOB = "nicejob", e.PAYPAL = "paypal", e.QDS = "qds", e.QUICKBOOKS = "quickbooks", e.RESPONSIBID = "responsibid", e.SENDJIM = "sendjim", e.SERVICEMONSTER = "servicemonster", e.SERVICETITAN = "servicetitan", e.SQUARE = "square", e.STRIPE = "stripe", e.TRIPADVISOR = "tripadvisor", e.TWITTER = "twitter", e.VONIGO = "vonigo", e.XERO = "xero", e.YELP = "yelp", e.YP = "yp", e.ZENDESK = "zendesk", e.ZILLOW = "zillow"
    }(P || (P = {})),
    function(e) {
        e.Person = "Person", e.Employee = "Employee", e.User = "User"
    }(U || (U = {})),
    function(e) {
        e.succeeded = "succeeded", e.pending = "pending", e.failed = "failed"
    }(x || (x = {})),
    function(e) {
        e.IMPORT = "IMPORT", e.LEAD_FORM = "LEAD_FORM", e.RECOMMENDATION = "RECOMMENDATION", e.REFERRAL_WIDGET = "REFERRAL_WIDGET", e.REFERRAL_LEAD_FORM = "REFERRAL_LEAD_FORM", e.CHECK_IN = "CHECK_IN", e.INVITE = "INVITE"
    }(B || (B = {})),
    function(e) {
        e.lead = "LEAD", e.customer = "CUSTOMER"
    }(H || (H = {})),
    function(e) {
        e.CallCreated = "CallCreated", e.CallUpdated = "CallUpdated", e.CampaignEnrollmentCreated = "CampaignEnrollmentCreated", e.CampaignRequestClicked = "CampaignRequestClicked", e.CampaignRequestRead = "CampaignRequestRead", e.CampaignRequestSent = "CampaignRequestSent", e.CaseCreated = "CaseCreated", e.CaseUpdated = "CaseUpdated", e.ClickCreated = "ClickCreated", e.ConversationCreated = "ConversationCreated", e.ConversationRated = "ConversationRated", e.ConversationUpdated = "ConversationUpdated", e.InvoiceCreated = "InvoiceCreated", e.InvoicePaid = "InvoicePaid", e.InvoiceUpdated = "InvoiceUpdated", e.JobCompleted = "JobCompleted", e.JobCreated = "JobCreated", e.LeadCreated = "LeadCreated", e.LifecycleStageLeadUpdated = "LifecycleStageLeadUpdated", e.LifecycleStageCustomerUpdated = "LifecycleStageCustomerUpdated", e.PaymentCreated = "PaymentCreated", e.PaymentUpdated = "PaymentUpdated", e.PersonBlocked = "PersonBlocked", e.PersonCreated = "PersonCreated", e.PersonUnblocked = "PersonUnblocked", e.ProposalAccepted = "ProposalAccepted", e.ProposalCreated = "ProposalCreated", e.ProposalRejected = "ProposalRejected", e.ProposalUpdated = "ProposalUpdated", e.RecommendationCreatedRecommendee = "RecommendationCreatedRecommendee", e.RecommendationCreatedRecommender = "RecommendationCreatedRecommender", e.ReviewCreated = "ReviewCreated", e.ReviewUpdated = "ReviewUpdated", e.SessionCreated = "SessionCreated", e.SessionUpdated = "SessionUpdated", e.UnsubscribeCreated = "UnsubscribeCreated", e.ViewCreated = "ViewCreated", e.VisitCompleted = "VisitCompleted", e.VisitCreated = "VisitCreated"
    }(G || (G = {})),
    function(e) {
        e.OPEN = "OPEN", e.ACCEPTED = "ACCEPTED", e.REJECTED = "REJECTED"
    }(W || (W = {})),
    function(e) {
        e.PENDING = "PENDING", e.SENT = "SENT", e.FAILED = "FAILED", e.THIRD_PARTY_SHARE = "THIRD_PARTY_SHARE"
    }(V || (V = {})),
    function(e) {
        e.MONTH = "month", e.WEEK = "week", e.DAY = "day"
    }(J || (J = {})),
    function(e) {
        e.people_on_time = "people_on_time", e.people_late = "people_late", e.people_quick_response = "people_quick_response", e.people_slow_response = "people_slow_response", e.people_friendly = "people_friendly", e.people_not_friendly = "people_not_friendly", e.people_reliable = "people_reliable", e.people_not_reliable = "people_not_reliable", e.people_professional = "people_professional", e.people_not_professional = "people_not_professional", e.people_organized = "people_organized", e.people_disorganized = "people_disorganized", e.people_knowledgeable = "people_knowledgeable", e.people_not_knowledgeable = "people_not_knowledgeable", e.people_communicative = "people_communicative", e.people_uncommunicative = "people_uncommunicative", e.people_lots_of_experience = "people_lots_of_experience", e.people_limited_experience = "people_limited_experience", e.people_careful = "people_careful", e.people_careless = "people_careless", e.people_great = "people_great", e.people_poor = "people_poor", e.service_great_results = "service_great_results", e.service_poor_results = "service_poor_results", e.service_affordable = "service_affordable", e.service_expensive = "service_expensive", e.service_reliable = "service_reliable", e.service_not_reliable = "service_not_reliable", e.service_professional = "service_professional", e.service_not_professional = "service_not_professional", e.service_fast = "service_fast", e.service_slow = "service_slow", e.company_low_effort = "company_low_effort", e.company_high_effort = "company_high_effort", e.company_recommend = "company_recommend", e.company_not_recommend = "company_not_recommend", e.company_guarantee_honoured = "company_guarantee_honoured", e.company_guarantee_not_honoured = "company_guarantee_not_honoured", e.company_easy_to_contact = "company_easy_to_contact", e.company_hard_to_contact = "company_hard_to_contact", e.company_lots_of_experience = "company_lots_of_experience", e.company_limited_experience = "company_limited_experience"
    }(F || (F = {})),
    function(e) {
        e.POSITIVE = "POSITIVE", e.NEGATIVE = "NEGATIVE"
    }(K || (K = {})),
    function(e) {
        e.QUEUED = "queued", e.PROCESSED = "processed", e.FAILED = "failed", e.AUTH_EXPIRED = "auth_expired", e.DEDUPLICATED = "deduplicated", e.REQUEUED = "requeued", e.SPLIT = "split", e.SKIPPED = "skipped"
    }(q || (q = {}));
    const Y = M.EN,
        X = {
            Job: {
                external_created_at: "created_at",
                scheduled_at: "scheduled_time",
                completed_at: "completed_time"
            },
            Visit: {
                external_created_at: "created_at",
                job_id: "booking_id",
                scheduled_at: "scheduled_time",
                completed_at: "completed_time"
            },
            Case: {
                external_created_at: "created_at",
                completed_at: "completed_time"
            },
            Invoice: {
                external_created_at: "created_at",
                external_invoice_name: "name"
            },
            Payment: {
                external_created_at: "created_at"
            },
            Proposal: {
                external_created_at: "created_at",
                completed_at: "completed_time"
            }
        },
        $ = {
            Case: ["CreateCaseInput", "UpdateCaseInput"],
            Invoice: ["CreateInvoiceInput", "UpdateInvoiceInput"],
            Job: ["CreateJobInput", "UpdateJobInput"],
            Visit: ["CreateVisitInput", "UpdateVisitInput"],
            Payment: ["CreatePaymentInput", "UpdatePaymentInput"],
            Proposal: ["CreateProposalInput", "UpdateProposalInput"]
        };
    for (const e in $)
        for (const t of $[e]) X[t] = X[e];
    const z = "receive_lead";
    n(12);
    var Q, Z, ee, te, ne, oe;
    ! function(e) {
        e.ARCHIVE_KIND = "archive-kind", e["asana-api"] = "asana-api", e.BATCH_ENROLLMENT_PROCESSING = "batch-enrollment-processing", e.BATCH_REVIEW_SCRAPE = "batch-review-scrape", e["batch-stripe-customer-updated"] = "batch-stripe-customer-updated", e["batch-stripe-subscription-updated"] = "batch-stripe-subscription-updated", e.CAMPAIGN_REQUEST = "campaign-request", e.COMPANY_BACKFILL = "company-backfill", e.CREATE_REVIEWS = "create-reviews", e["create-convert"] = "create-convert", e["datastore-to-bigquery"] = "datastore-to-bigquery", e.default = "default", e["get-insights"] = "get-insights", e.GIFT_REPORT = "gift-report", e.GOOGLE_ANALYTICS_API = "google-analytics-api", e.GOOGLE_API_SCRAPE_QUEUE = "google-api-scrape-queue", e.EVALUATE_GIFT_INTENTS = "evaluate-gift-intents", e.IMPORT_INTEGRATION_DATA = "import-integration-data", e["intercom-api"] = "intercom-api", e.MAX_UNITS = "max-units", e["nudge-company-entities"] = "nudge-company-entities", e.OPPORTUNITIES = "opportunities", e.PAYMENT_REPORT_EXPORT = "payment-report-export", e.PROCESS_ALL_CAMPAIGNS = "process-all-campaigns", e.PROCESS_ALL_SUBJECTS = "process-all-subjects", e.PROCESS_UNPROCESSED_REVIEWS = "process-unprocessed-reviews", e.REINSTATE_REVIEWS = "reinstate-reviews", e.SEND_MESSAGE = "send-message", e.schedule = "schedule", e["scrape-reviews"] = "scrape-reviews", e["story-auto-share"] = "story-auto-share", e.SYNC_ALL_INTERCOM_DATA = "syncAllIntercomData", e.SYNC_ALL_SEGMENT_DATA = "sync-all-segment-data", e.UPDATE_REVIEWS = "update-reviews", e["webhooks-clio"] = "webhooks-clio", e["webhooks-freshbooks"] = "webhooks-freshbooks", e["webhooks-housecallpro-0"] = "webhooks-housecallpro-0", e["webhooks-housecallpro-1"] = "webhooks-housecallpro-1", e["webhooks-housecallpro-2"] = "webhooks-housecallpro-2", e["webhooks-housecallpro-3"] = "webhooks-housecallpro-3", e["webhooks-intercom"] = "webhooks-intercom", e["webhooks-intercom-0"] = "webhooks-intercom-0", e["webhooks-intercom-1"] = "webhooks-intercom-1", e["webhooks-intercom-2"] = "webhooks-intercom-2", e["webhooks-intercom-3"] = "webhooks-intercom-3", e["webhooks-jobber-0"] = "webhooks-jobber-0", e["webhooks-jobber-1"] = "webhooks-jobber-1", e["webhooks-jobber-2"] = "webhooks-jobber-2", e["webhooks-jobber-3"] = "webhooks-jobber-3", e["webhooks-jobber-4"] = "webhooks-jobber-4", e["webhooks-jobber-5"] = "webhooks-jobber-5", e["webhooks-jobber-6"] = "webhooks-jobber-6", e["webhooks-jobber-7"] = "webhooks-jobber-7", e["webhooks-jobber-8"] = "webhooks-jobber-8", e["webhooks-jobber-9"] = "webhooks-jobber-9", e["webhooks-jobber-10"] = "webhooks-jobber-10", e["webhooks-jobber-11"] = "webhooks-jobber-11", e["webhooks-jobber-12"] = "webhooks-jobber-12", e["webhooks-jobber-13"] = "webhooks-jobber-13", e["webhooks-jobber-14"] = "webhooks-jobber-14", e["webhooks-jobber-15"] = "webhooks-jobber-15", e["webhooks-jobber-v2-0"] = "webhooks-jobber-v2-0", e["webhooks-jobber-v2-1"] = "webhooks-jobber-v2-1", e["webhooks-jobber-v2-2"] = "webhooks-jobber-v2-2", e["webhooks-jobber-v2-3"] = "webhooks-jobber-v2-3", e["webhooks-jobber-v2-4"] = "webhooks-jobber-v2-4", e["webhooks-jobber-v2-5"] = "webhooks-jobber-v2-5", e["webhooks-jobber-v2-6"] = "webhooks-jobber-v2-6", e["webhooks-jobber-v2-7"] = "webhooks-jobber-v2-7", e["webhooks-jobber-v2-8"] = "webhooks-jobber-v2-8", e["webhooks-jobber-v2-9"] = "webhooks-jobber-v2-9", e["webhooks-jobber-v2-10"] = "webhooks-jobber-v2-10", e["webhooks-jobber-v2-11"] = "webhooks-jobber-v2-11", e["webhooks-jobber-v2-12"] = "webhooks-jobber-v2-12", e["webhooks-jobber-v2-13"] = "webhooks-jobber-v2-13", e["webhooks-jobber-v2-14"] = "webhooks-jobber-v2-14", e["webhooks-jobber-v2-15"] = "webhooks-jobber-v2-15", e["webhooks-quickbooks"] = "webhooks-quickbooks", e["webhooks-responsibid"] = "webhooks-responsibid", e["webhooks-stripe"] = "webhooks-stripe", e["webhooks-xero"] = "webhooks-xero"
    }(Q || (Q = {})),
    function(e) {
        e.OWNER = "OWNER", e.MANAGER_PLUS_PAYMENT = "MANAGER_PLUS_PAYMENT", e.MANAGER = "MANAGER", e.TEAM_MEMBER = "TEAM_MEMBER"
    }(Z || (Z = {})),
    function(e) {
        e.MANAGER_PLUS_PAYMENT = "MANAGER_PLUS_PAYMENT", e.MANAGER = "MANAGER", e.TEAM_MEMBER = "TEAM_MEMBER"
    }(ee || (ee = {})),
    function(e) {
        e.OWNER = "OWNER", e.MANAGER_PLUS_PAYMENT = "MANAGER_PLUS_PAYMENT", e.MANAGER = "MANAGER", e.TEAM_MEMBER = "TEAM_MEMBER"
    }(te || (te = {})),
    function(e) {
        e.MANAGER_PLUS_PAYMENT = "MANAGER_PLUS_PAYMENT", e.MANAGER = "MANAGER", e.TEAM_MEMBER = "TEAM_MEMBER", e.DELETE = "DELETE"
    }(ne || (ne = {})),
    function(e) {
        e.OWNER = "OWNER", e.MANAGER_PLUS_PAYMENT = "MANAGER_PLUS_PAYMENT", e.MANAGER = "MANAGER", e.TEAM_MEMBER = "TEAM_MEMBER", e.DELETE = "DELETE"
    }(oe || (oe = {}));
    Z.OWNER, Z.MANAGER_PLUS_PAYMENT
}, function(e, t, n) {
    "use strict";

    function o(e) {
        return void 0 === e ? {} : JSON.parse(JSON.stringify(e))
    }
    n.d(t, "a", (function() {
        return o
    })), n.d(t, "b", (function() {
        return r
    }));
    n(10);
    var i = n(3);

    function r(e) {
        return e.hasAttribute(i.c) && e.hasAttribute(i.f) ? parseInt(e.getAttribute(i.f) || "") - parseInt(e.getAttribute(i.c) || "") : null
    }
    var s = n(13),
        a = n(16);
    s.a, a.a
}, function(e, t, n) {
    "use strict";

    function o(e, t) {
        const n = (65535 & e) + (65535 & t);
        return (e >> 16) + (t >> 16) + (n >> 16) << 16 | 65535 & n
    }

    function i(e, t, n, i, r, s) {
        return o((a = o(o(t, e), o(i, s))) << (c = r) | a >>> 32 - c, n);
        var a, c
    }

    function r(e, t, n, o, r, s, a) {
        return i(t & n | ~t & o, e, t, r, s, a)
    }

    function s(e, t, n, o, r, s, a) {
        return i(t & o | n & ~o, e, t, r, s, a)
    }

    function a(e, t, n, o, r, s, a) {
        return i(t ^ n ^ o, e, t, r, s, a)
    }

    function c(e, t, n, o, r, s, a) {
        return i(n ^ (t | ~o), e, t, r, s, a)
    }

    function d(e, t) {
        let n, i, d, l, _;
        e[t >> 5] |= 128 << t % 32, e[14 + (t + 64 >>> 9 << 4)] = t;
        let u = 1732584193,
            m = -271733879,
            b = -1732584194,
            p = 271733878;
        for (n = 0; n < e.length; n += 16) i = u, d = m, l = b, _ = p, u = r(u, m, b, p, e[n], 7, -680876936), p = r(p, u, m, b, e[n + 1], 12, -389564586), b = r(b, p, u, m, e[n + 2], 17, 606105819), m = r(m, b, p, u, e[n + 3], 22, -1044525330), u = r(u, m, b, p, e[n + 4], 7, -176418897), p = r(p, u, m, b, e[n + 5], 12, 1200080426), b = r(b, p, u, m, e[n + 6], 17, -1473231341), m = r(m, b, p, u, e[n + 7], 22, -45705983), u = r(u, m, b, p, e[n + 8], 7, 1770035416), p = r(p, u, m, b, e[n + 9], 12, -1958414417), b = r(b, p, u, m, e[n + 10], 17, -42063), m = r(m, b, p, u, e[n + 11], 22, -1990404162), u = r(u, m, b, p, e[n + 12], 7, 1804603682), p = r(p, u, m, b, e[n + 13], 12, -40341101), b = r(b, p, u, m, e[n + 14], 17, -1502002290), m = r(m, b, p, u, e[n + 15], 22, 1236535329), u = s(u, m, b, p, e[n + 1], 5, -165796510), p = s(p, u, m, b, e[n + 6], 9, -1069501632), b = s(b, p, u, m, e[n + 11], 14, 643717713), m = s(m, b, p, u, e[n], 20, -373897302), u = s(u, m, b, p, e[n + 5], 5, -701558691), p = s(p, u, m, b, e[n + 10], 9, 38016083), b = s(b, p, u, m, e[n + 15], 14, -660478335), m = s(m, b, p, u, e[n + 4], 20, -405537848), u = s(u, m, b, p, e[n + 9], 5, 568446438), p = s(p, u, m, b, e[n + 14], 9, -1019803690), b = s(b, p, u, m, e[n + 3], 14, -187363961), m = s(m, b, p, u, e[n + 8], 20, 1163531501), u = s(u, m, b, p, e[n + 13], 5, -1444681467), p = s(p, u, m, b, e[n + 2], 9, -51403784), b = s(b, p, u, m, e[n + 7], 14, 1735328473), m = s(m, b, p, u, e[n + 12], 20, -1926607734), u = a(u, m, b, p, e[n + 5], 4, -378558), p = a(p, u, m, b, e[n + 8], 11, -2022574463), b = a(b, p, u, m, e[n + 11], 16, 1839030562), m = a(m, b, p, u, e[n + 14], 23, -35309556), u = a(u, m, b, p, e[n + 1], 4, -1530992060), p = a(p, u, m, b, e[n + 4], 11, 1272893353), b = a(b, p, u, m, e[n + 7], 16, -155497632), m = a(m, b, p, u, e[n + 10], 23, -1094730640), u = a(u, m, b, p, e[n + 13], 4, 681279174), p = a(p, u, m, b, e[n], 11, -358537222), b = a(b, p, u, m, e[n + 3], 16, -722521979), m = a(m, b, p, u, e[n + 6], 23, 76029189), u = a(u, m, b, p, e[n + 9], 4, -640364487), p = a(p, u, m, b, e[n + 12], 11, -421815835), b = a(b, p, u, m, e[n + 15], 16, 530742520), m = a(m, b, p, u, e[n + 2], 23, -995338651), u = c(u, m, b, p, e[n], 6, -198630844), p = c(p, u, m, b, e[n + 7], 10, 1126891415), b = c(b, p, u, m, e[n + 14], 15, -1416354905), m = c(m, b, p, u, e[n + 5], 21, -57434055), u = c(u, m, b, p, e[n + 12], 6, 1700485571), p = c(p, u, m, b, e[n + 3], 10, -1894986606), b = c(b, p, u, m, e[n + 10], 15, -1051523), m = c(m, b, p, u, e[n + 1], 21, -2054922799), u = c(u, m, b, p, e[n + 8], 6, 1873313359), p = c(p, u, m, b, e[n + 15], 10, -30611744), b = c(b, p, u, m, e[n + 6], 15, -1560198380), m = c(m, b, p, u, e[n + 13], 21, 1309151649), u = c(u, m, b, p, e[n + 4], 6, -145523070), p = c(p, u, m, b, e[n + 11], 10, -1120210379), b = c(b, p, u, m, e[n + 2], 15, 718787259), m = c(m, b, p, u, e[n + 9], 21, -343485551), u = o(u, i), m = o(m, d), b = o(b, l), p = o(p, _);
        return [u, m, b, p]
    }

    function l(e) {
        let t, n = "";
        const o = 32 * e.length;
        for (t = 0; t < o; t += 8) n += String.fromCharCode(e[t >> 5] >>> t % 32 & 255);
        return n
    }

    function _(e) {
        let t;
        const n = [];
        for (n[(e.length >> 2) - 1] = void 0, t = 0; t < n.length; t += 1) n[t] = 0;
        const o = 8 * e.length;
        for (t = 0; t < o; t += 8) n[t >> 5] |= (255 & e.charCodeAt(t / 8)) << t % 32;
        return n
    }

    function u(e) {
        let t, n, o = "";
        for (n = 0; n < e.length; n += 1) t = e.charCodeAt(n), o += "0123456789abcdef".charAt(t >>> 4 & 15) + "0123456789abcdef".charAt(15 & t);
        return o
    }

    function m(e) {
        return unescape(encodeURIComponent(e))
    }

    function b(e) {
        return function(e) {
            return l(d(_(e), 8 * e.length))
        }(m(e))
    }

    function p(e, t) {
        return function(e, t) {
            let n, o = _(e);
            const i = [],
                r = [];
            for (i[15] = r[15] = void 0, o.length > 16 && (o = d(o, 8 * e.length)), n = 0; n < 16; n += 1) i[n] = 909522486 ^ o[n], r[n] = 1549556828 ^ o[n];
            const s = d(i.concat(_(t)), 512 + 8 * t.length);
            return l(d(r.concat(s), 640))
        }(m(e), m(t))
    }

    function f(e, t, n) {
        return t ? n ? p(t, e) : u(p(t, e)) : n ? b(e) : u(b(e))
    }
    n.d(t, "a", (function() {
        return f
    }))
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return s
    }));
    var o = n(2),
        i = n(4),
        r = n(0);

    function s(e) {
        const t = Object(r.k)(o.a);
        if (t.length)
            for (const n of t) {
                if (n.hasAttribute(r.b)) continue;
                let t = {};
                try {
                    t = JSON.parse(n.getAttribute(o.E) || "{}")
                } catch (e) {
                    console.error("setupClickTracking", "failed to parse metadata", n, e)
                }
                Object(r.g)(n, "click", () => {
                    null == e || e.send(i.a.click, {
                        element: n,
                        metadata: t
                    })
                }), n.setAttribute(r.b, "true")
            }
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return m
    })), n.d(t, "b", (function() {
        return b
    }));
    var o = n(14),
        i = n(2),
        r = n(4),
        s = n(1),
        a = n(3),
        c = n(8),
        d = n(5),
        l = n(6),
        _ = n(11),
        u = n(9);
    class m extends u.a {
        constructor(e, t, n) {
            super(e, t, n, i.e);
            const r = this.openLeadFormModal.bind(this),
                c = this.closeLeadFormModal.bind(this),
                l = this.submitLead.bind(this),
                u = e;
            let m = null;
            const b = !u.hasAttribute(a.e),
                p = u.hasAttribute(a.d);
            if (Object(s.a)(u, "click", r), b) {
                const t = u.getAttribute(a.h),
                    n = Object(s.d)(t || "");
                if (!n || !t) throw console.error("LeadForm: Related modal not found for", e, t, n), new Error("LeadForm modal not found");
                m = Object(s.e)("nj-modal-bg", n)[0], Object(s.a)(m, "click", c), Object(s.c)("nj-modal-card", "click", e => {
                    e.preventDefault(), e.stopPropagation()
                }, m), Object(s.c)("e__nj--open-modal-card", "click", d.b), Object(s.c)("nj-close-card", "click", c, m), Object(s.c)("e__nj--lead--submit", "click", l, m)
            }
            p && u.setAttribute("target", "_blank"), this.modal = m, this.has_custom_href = p, this.language = m ? Object(_.a)(m) : o.a, this.sendViewOnLoad()
        }
        openLeadFormModal(e) {
            this.modal ? Object(d.c)(e) : this.has_custom_href && b(), this.NiceJob.send(r.a.click, {
                element: this.parent,
                metadata: { ...this.event_metadata,
                    type: this.has_custom_href ? "REDIRECT" : "EXPAND"
                }
            })
        }
        closeLeadFormModal(e) {
            const t = this.modal;
            if (!t) return;
            e.preventDefault(), e.stopPropagation(), t.classList.add("hide");
            const n = Object(s.e)("nj-modal-card", t);
            for (const e of n) e.classList.add("hide");
            const o = Object(s.e)("nj-modal-card--lead--form", t)[0];
            o && o.classList.remove("hide");
            const i = Object(s.h)("FORM", t)[0];
            for (let e = 0; e < i.length; e++) {
                const t = i[e];
                "checkbox" === t.type || "radio" === t.type ? t.checked = !1 : t.value = ""
            }
            const a = e.currentTarget || e.target;
            this.NiceJob.send(r.a.click, {
                element: a,
                metadata: { ...this.event_metadata,
                    type: "CLOSE"
                }
            })
        }
        submitLead(e) {
            const t = e.currentTarget || e.target;
            if (t.classList.contains(a.k)) return;
            if (!this.modal) return;
            const n = this.modal,
                o = Object(s.f)(t, null, "FORM"),
                r = {};
            for (let e = 0; e < o.length; e++) {
                const {
                    name: t,
                    value: s,
                    checked: a,
                    type: c,
                    required: _
                } = o[e];
                if (r[t] = "checkbox" === c || "radio" === c ? !!a : s.trim(), _ && !r[t]) return Object(d.a)({
                    form: i.e,
                    error: Object(l.a)({
                        language: this.language,
                        namespace: "lead",
                        key: "name_validation",
                        params: {
                            name: t
                        }
                    }),
                    modal: n
                })
            }
            if (!a.i.test(r.email)) return Object(d.a)({
                form: i.e,
                error: Object(l.a)({
                    namespace: "common",
                    key: "email_validation",
                    language: this.language
                }),
                modal: n
            });
            t.classList.add(a.k);
            const {
                company_id: _,
                reviewly: u,
                SDK_CREATE_LEAD_URL: m
            } = Object(c.a)(), {
                session_id: p,
                pageview_id: f,
                csrf_token: E
            } = Object(c.b)();
            Object(s.l)({
                body: {
                    lead: r,
                    session_id: p,
                    pageview_id: f,
                    csrf_token: E,
                    company_id: _,
                    reviewly: u
                },
                url: m
            }).then(o => {
                if (o.error) return console.error("submitLead submission error:", o.error), Object(d.a)({
                    form: i.e,
                    error: Object(l.a)({
                        namespace: "common",
                        key: "submit_error",
                        language: this.language
                    }),
                    modal: n
                });
                t.classList.remove(a.k), Object(d.b)(e, "nj-modal-card--lead--success"), b()
            })
        }
    }

    function b() {
        try {
            void 0 !== window.gtag && window.gtag("event", o.b, {
                event_category: "Leads",
                event_label: "Receive lead"
            })
        } catch (e) {}
    }
}, function(module, __webpack_exports__, __webpack_require__) {
    "use strict";
    __webpack_require__.d(__webpack_exports__, "a", (function() {
        return Widget
    })), __webpack_require__.d(__webpack_exports__, "c", (function() {
        return appendSnippets
    })), __webpack_require__.d(__webpack_exports__, "b", (function() {
        return appendJSONLD
    }));
    var _common_sdk_globals__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2),
        _common_domutil__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1),
        _common_globals__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3),
        _common_tools__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8),
        _util_clickTracking__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(17),
        _util_install__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(10),
        _goals_goals__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(20),
        _lead_form_lead_form__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(18),
        _recommendation_recommendation__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(28),
        _referral_lead_form_referral_lead_form__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(21),
        _review_form_getReviewFormContent__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(22),
        _review_form_getReviewFormContentCallback__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(23),
        _review_form_review_form__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(24),
        _social_proof_social_proof__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(25),
        _stories_stories__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(26),
        _trust_badge_trust_badge__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(27);
    const HEAD_SCRIPTS = [];
    class Widget {
        constructor(e, t) {
            this.input = e, this.widget = this.input.installation.request.widget, this.NiceJob = t
        }
        async install() {
            const e = this.input,
                {
                    installation: t,
                    i: n,
                    json_ld_request: o = !1
                } = e,
                {
                    element: i,
                    request: r
                } = t,
                {
                    widget: s
                } = r || {},
                a = i.hasAttribute(_common_globals__WEBPACK_IMPORTED_MODULE_2__.b);
            if (a && !o) return;
            Object(_util_install__WEBPACK_IMPORTED_MODULE_5__.c)(t);
            const c = await this.loadData(),
                {
                    response: d,
                    facebook_login_status: l,
                    google_login_status: _
                } = c,
                {
                    json_ld_available: u = !1,
                    json_ld: m = [],
                    event_metadata: b
                } = d;
            if (appendJSONLD(m), a) return;
            if (this.display(d), "REVIEW_FORM" === this.widget) {
                if (void 0 === l || void 0 === _) throw new Error("Review form init error: login status not returned from response.");
                const e = this.input.optimize_sort_order;
                Object(_review_form_getReviewFormContentCallback__WEBPACK_IMPORTED_MODULE_11__.a)({
                    el: i,
                    optimize_sort_order: e,
                    facebook_login_status: l,
                    google_login_status: _
                })
            }
            if (s === _common_sdk_globals__WEBPACK_IMPORTED_MODULE_0__.D || s === _common_sdk_globals__WEBPACK_IMPORTED_MODULE_0__.b) new _stories_stories__WEBPACK_IMPORTED_MODULE_14__.a(i, b, this.NiceJob);
            else if (s === _common_sdk_globals__WEBPACK_IMPORTED_MODULE_0__.j) new _recommendation_recommendation__WEBPACK_IMPORTED_MODULE_8__.a(i, b, this.NiceJob);
            else if (s === _common_sdk_globals__WEBPACK_IMPORTED_MODULE_0__.l) new _review_form_review_form__WEBPACK_IMPORTED_MODULE_12__.a(i, b, this.NiceJob);
            else if (s === _common_sdk_globals__WEBPACK_IMPORTED_MODULE_0__.e) new _lead_form_lead_form__WEBPACK_IMPORTED_MODULE_7__.a(i, b, this.NiceJob);
            else if (s === _common_sdk_globals__WEBPACK_IMPORTED_MODULE_0__.C) new _social_proof_social_proof__WEBPACK_IMPORTED_MODULE_13__.a(i, b, this.NiceJob);
            else if (s === _common_sdk_globals__WEBPACK_IMPORTED_MODULE_0__.d) new _goals_goals__WEBPACK_IMPORTED_MODULE_6__.a(i, b, this.NiceJob);
            else if (s === _common_sdk_globals__WEBPACK_IMPORTED_MODULE_0__.F) new _trust_badge_trust_badge__WEBPACK_IMPORTED_MODULE_15__.a(i, b, this.NiceJob);
            else {
                if (s !== _common_sdk_globals__WEBPACK_IMPORTED_MODULE_0__.k) throw new Error(`Handler missing for widget "${s}"`);
                new _referral_lead_form_referral_lead_form__WEBPACK_IMPORTED_MODULE_9__.a(i, b, this.NiceJob)
            }
            u && new Widget({ ...e,
                json_ld_request: !0
            }, this.NiceJob).install().then(() => {});
            const p = Object(_util_install__WEBPACK_IMPORTED_MODULE_5__.b)(!0);
            await Promise.all(p.map((t, o) => new Widget({ ...e,
                installation: t,
                i: 10 * n + o + Date.now()
            }, this.NiceJob).install())), Object(_util_clickTracking__WEBPACK_IMPORTED_MODULE_4__.a)(this.NiceJob)
        }
        async loadData() {
            const e = this.input,
                {
                    company_id: t,
                    reviewly: n,
                    installation: o,
                    json_ld_request: i = !1,
                    session_id: r
                } = e,
                {
                    request: s
                } = o,
                a = {
                    session_id: r,
                    company_id: t,
                    reviewly: n,
                    widget: s,
                    json_ld_request: i
                },
                {
                    widget: c
                } = s || {};
            return new Promise((e, t) => {
                if (c === _common_sdk_globals__WEBPACK_IMPORTED_MODULE_0__.l) return Object(_review_form_getReviewFormContent__WEBPACK_IMPORTED_MODULE_10__.a)(a).then(e).catch(t); {
                    const {
                        SDK_LOAD_URL: n
                    } = Object(_common_tools__WEBPACK_IMPORTED_MODULE_3__.a)();
                    Object(_common_domutil__WEBPACK_IMPORTED_MODULE_1__.l)({
                        body: a,
                        url: n
                    }).then(t => e({
                        response: t
                    })).catch(t)
                }
            })
        }
        display(e) {
            var t;
            const n = this.input,
                {
                    installation: o,
                    i: i
                } = n,
                {
                    element: r,
                    request: s
                } = o,
                {
                    id: a,
                    widget: c
                } = s || {},
                {
                    snippets: d = [],
                    content: l = ""
                } = e;
            if (r && r.setAttribute(_common_globals__WEBPACK_IMPORTED_MODULE_2__.f, Date.now().toString()), appendSnippets(d), r) {
                const e = Object(_common_domutil__WEBPACK_IMPORTED_MODULE_1__.e)(_common_globals__WEBPACK_IMPORTED_MODULE_2__.l, r)[0];
                e && (null === (t = e.parentNode) || void 0 === t || t.removeChild(e))
            }
            let _ = null;
            if (r && a && l && c) {
                const {
                    method: e
                } = _common_sdk_globals__WEBPACK_IMPORTED_MODULE_0__.G[c], t = /^href::(.+)/.exec(l.trim());
                let n = !0,
                    o = !1;
                if (headScript(l)) n = !1;
                else if (t) r.href = t[1], n = !1, o = !0;
                else if ("APPEND" === e) r.innerHTML += "\r\n" + l;
                else if ("SIBLING" === e) {
                    const e = `${c}--${i}`;
                    r.setAttribute(_common_globals__WEBPACK_IMPORTED_MODULE_2__.h, e), _ = Object(_common_domutil__WEBPACK_IMPORTED_MODULE_1__.k)({
                        tag: "DIV",
                        options: {
                            id: e
                        }
                    }), _.innerHTML = l, document.body.appendChild(_)
                } else r.innerHTML = l;
                "A" !== r.tagName || t || (r.href = _common_globals__WEBPACK_IMPORTED_MODULE_2__.j), c !== _common_sdk_globals__WEBPACK_IMPORTED_MODULE_0__.e || n || r.setAttribute(_common_globals__WEBPACK_IMPORTED_MODULE_2__.e, "1"), c === _common_sdk_globals__WEBPACK_IMPORTED_MODULE_0__.e && o && r.setAttribute(_common_globals__WEBPACK_IMPORTED_MODULE_2__.d, "1")
            }[r, _].forEach(e => {
                e && Object(_common_domutil__WEBPACK_IMPORTED_MODULE_1__.c)("e__nj--stop-propagation", "click", e => {
                    e.stopPropagation()
                }, e)
            })
        }
    }

    function headScript(e) {
        const t = /<script[^>]* src=["'](.+?)["'][^>]*><\/script>/.exec(e);
        if (t) {
            const e = t[1];
            return HEAD_SCRIPTS.includes(e) || (HEAD_SCRIPTS.push(e), Object(_common_domutil__WEBPACK_IMPORTED_MODULE_1__.k)({
                tag: "SCRIPT",
                options: {
                    src: e,
                    type: "text/javascript"
                },
                parent: document.head
            })), !0
        }
        return !1
    }

    function appendSnippets(snippets) {
        if (!snippets || !snippets.length) return;
        let snippet_html = "";
        const script_pattern = /<script>([\s\S]+?)<\/script>/;
        for (const snippet of snippets)
            if (0 === snippet.trim().indexOf("<script>")) try {
                const match = script_pattern.exec(snippet);
                match && eval(match[1])
            } catch (e) {
                console.error("NJ errror: Script snippet failed to load", snippet)
            } else snippet_html += snippet + "\r\n\r\n";
        if (snippet_html) {
            const e = Object(_common_domutil__WEBPACK_IMPORTED_MODULE_1__.k)({
                tag: "DIV"
            });
            e.innerHTML = snippet_html, document.body.appendChild(e)
        }
    }

    function appendJSONLD(e) {
        if (e && e.length)
            for (const t of e) try {
                Object(_common_domutil__WEBPACK_IMPORTED_MODULE_1__.k)({
                    tag: "SCRIPT",
                    options: {
                        type: "application/ld+json"
                    },
                    parent: document.head,
                    content: JSON.stringify(t, null, 2)
                })
            } catch (e) {}
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return a
    }));
    var o = n(2),
        i = n(4),
        r = n(1),
        s = n(9);
    class a extends s.a {
        constructor(e, t, n) {
            super(e, t, n, o.d);
            const i = this.openReviewFormFromGoals.bind(this);
            Object(r.c)(o.m, "click", i, e), this.sendViewOnLoad()
        }
        openReviewFormFromGoals(e) {
            const t = e.currentTarget || e.target;
            this.NiceJob.send(i.a.click, {
                element: t,
                metadata: { ...this.event_metadata,
                    type: "EXPAND"
                }
            })
        }
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return m
    }));
    var o = n(2),
        i = n(4),
        r = n(1),
        s = n(0),
        a = n(5),
        c = n(6),
        d = n(11),
        l = n(9);
    const _ = ["name", "phone", "email"],
        u = /\?(.+)/;
    class m extends l.a {
        constructor(e, t, n) {
            super(e, t, n, o.k);
            const i = this.submitReferralLead.bind(this),
                s = document.getElementById("nj-referral-lead-modal");
            if (!s) throw console.error("Referral Lead Form not found", e, s), new Error("Referral Lead Form not found");
            Object(r.c)("e__nj--referral-lead--submit", "click", i, s), this.modal = s, this.language = Object(d.a)(s), this.form_errors = !1;
            const a = function(e) {
                const t = {},
                    n = u.exec(e);
                if (n) {
                    const e = n[1].split("&");
                    for (const n of e) {
                        const e = n.split("="),
                            o = e[0].toLowerCase();
                        let i = e[1] || null;
                        "false" !== i && "null" !== i && "0" !== i || (i = null), t[o] = i
                    }
                }
                return t
            }(window.location.href);
            !!a[o.h] && s.classList.remove("hide"), this.network_type = a.network_type || null, this.sendViewOnLoad()
        }
        submitReferralLead(e) {
            const t = e.currentTarget || e.target;
            if (t.classList.contains(s.e)) return;
            e.preventDefault(), e.stopPropagation();
            const n = this.modal;
            if (!n) return;
            this.form_errors && (Object(a.a)({
                form: o.k + "--email",
                reset: !0,
                modal: n
            }), Object(a.a)({
                form: o.k + "--name",
                reset: !0,
                modal: n
            }), Object(a.a)({
                form: o.k + "--phone",
                reset: !0,
                modal: n
            }), Object(a.a)({
                form: o.k + "--customer",
                reset: !0,
                modal: n
            }), this.form_errors = !1);
            const d = Object(r.e)("nj--referral-lead-form-fields"),
                l = d[0].getElementsByTagName("input"),
                u = {};
            for (const e of l) {
                const t = e.name;
                _.includes(t) && (u[t] = e.value)
            }
            if (!s.d.test(u.email)) return this.form_errors = !0, Object(a.a)({
                form: o.k + "--email",
                error: Object(c.a)({
                    language: this.language,
                    namespace: "common",
                    key: "email_validation"
                }),
                modal: n
            });
            if (!s.f.test(u.phone)) return this.form_errors = !0, Object(a.a)({
                form: o.k + "--phone",
                error: Object(c.a)({
                    language: this.language,
                    namespace: "common",
                    key: "phone_validation"
                }),
                modal: n
            });
            if (!u.name.length) return this.form_errors = !0, Object(a.a)({
                form: o.k + "--name",
                error: Object(c.a)({
                    language: this.language,
                    namespace: "common",
                    key: "name_validation"
                }),
                modal: n
            });
            this.form_errors || t.classList.add(s.e);
            const {
                company_id: m,
                reviewly: b,
                SDK_CREATE_REFERRAL_LEAD_URL: p
            } = Object(s.m)(), {
                session_id: f,
                pageview_id: E,
                csrf_token: h
            } = Object(s.n)();
            Object(r.l)({
                body: {
                    lead: { ...u
                    },
                    network_source: this.network_type,
                    session_id: f,
                    pageview_id: E,
                    csrf_token: h,
                    company_id: m,
                    reviewly: b
                },
                url: p
            }).then(e => {
                t.classList.remove(s.e);
                for (const e of d) e.classList.add("hide");
                Object(r.e)("nj--referral-lead-thank-you--text")[0].innerHTML = Object(c.a)({
                    namespace: "referral_lead_form",
                    key: "thank_you_text",
                    language: this.language,
                    params: {
                        name: u.name
                    }
                });
                const o = Object(r.e)("nj-modal-bg--referral-lead-thank-you");
                o[0].classList.remove("hide"), this.NiceJob.send(i.a.click, {
                    element: this.parent,
                    metadata: { ...this.event_metadata,
                        type: "SUBMIT",
                        subtype: "SUCCESS"
                    }
                });
                let a = 1;
                setTimeout(() => {
                    const e = setInterval(() => {
                        a < 0 && (o[0].classList.add("hide"), n.classList.add("hide"), clearInterval(e)), o[0].style.opacity = a.toString(), a -= .1
                    }, 50)
                }, 3e3)
            }).catch(e => {
                if (t.classList.remove(s.e), this.NiceJob.send(i.a.click, {
                        element: this.parent,
                        metadata: { ...this.event_metadata,
                            type: "SUBMIT",
                            subtype: "ERROR",
                            error: 422 === e.statusCode ? "USER_EXISTS" : "FORM_ERROR",
                            error_type: "res"
                        }
                    }), 422 === e.statusCode) return this.form_errors = !0, Object(a.a)({
                    form: o.k + "--customer",
                    error: Object(c.a)({
                        namespace: "referral_lead_form",
                        key: "customer_error",
                        language: this.language
                    }),
                    modal: n
                })
            })
        }
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return r
    }));
    var o = n(1),
        i = n(8);

    function r(e) {
        return new Promise((t, n) => {
            const {
                SDK_LOAD_URL: r
            } = Object(i.a)(), s = Object(o.l)({
                body: e,
                url: r
            }), a = new Promise((e, t) => {
                e(!0)
            }), c = new Promise((e, t) => {
                let n = !1;
                try {
                    const e = Object(o.k)({
                        tag: "IMG",
                        options: {
                            src: "https://accounts.google.com/ServiceLogin?continue=https://www.google.com/intl/en/images/logos/accounts_logo.png"
                        },
                        style: {
                            visibility: "hidden",
                            position: "absolute",
                            height: "1px",
                            width: "1px",
                            zIndex: "-1"
                        }
                    });
                    Object(o.a)(e, "load", () => {
                        i(!0)
                    }), Object(o.a)(e, "error", () => {
                        i(!1)
                    }), setTimeout(() => {
                        i(!1)
                    }, 2e3), document.body.appendChild(e)
                } catch (e) {
                    i(!0)
                }

                function i(t) {
                    n || (n = !0, e(t))
                }
            });
            Promise.all([s, a, c]).then(([e, n, o]) => t({
                response: e,
                facebook_login_status: n,
                google_login_status: o
            })).catch(n)
        })
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return r
    }));
    var o = n(1),
        i = n(3);

    function r({
        el: e,
        optimize_sort_order: t,
        facebook_login_status: n,
        google_login_status: r
    }) {
        if (!e) return;
        const a = e.getAttribute(i.h),
            c = Object(o.d)(a || "");
        if (!c) return;
        if (!t) return;
        const d = [...Object(o.e)("nj-funnel__channel", c)],
            l = Object(o.e)("nj--review-source--google", c)[0],
            _ = Object(o.e)("nj--review-source--facebook", c)[0];
        l && !r && s(d, l), _ && !n && s(d, _);
        let u = 0;
        [...Object(o.e)("nj-funnel__channel", c)].forEach(e => {
            1 !== d.length && (e.classList.contains("e__nj--review-source--nicejob") ? e.classList.add("hide") : u < i.o ? (e.classList.remove("hide"), u++) : e.classList.add("hide"))
        })
    }

    function s(e, t, n = 1) {
        const o = t.parentNode;
        if (!o) return;
        const i = e.findIndex(e => e === t) + n;
        i >= e.length - 1 ? o.appendChild(t) : o.insertBefore(t, e[i + 1])
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return u
    }));
    var o = n(2),
        i = n(4),
        r = n(0),
        s = n(5),
        a = n(6),
        c = n(11),
        d = n(9),
        l = n(7);

    function _(e, t) {
        switch (e) {
            case 1:
                return Object(a.a)({
                    namespace: "common",
                    key: "poor",
                    language: t
                });
            case 2:
                return Object(a.a)({
                    namespace: "common",
                    key: "fair",
                    language: t
                });
            case 3:
                return Object(a.a)({
                    namespace: "common",
                    key: "good",
                    language: t
                });
            case 4:
                return Object(a.a)({
                    namespace: "common",
                    key: "very_good",
                    language: t
                });
            case 5:
                return Object(a.a)({
                    namespace: "common",
                    key: "outstanding",
                    language: t
                });
            default:
                return Object(a.a)({
                    namespace: "reviews",
                    key: "select_star",
                    language: t
                })
        }
    }
    class u extends d.a {
        constructor(e, t, n) {
            super(e, t, n, o.l), this.is_open = !1, this.is_showing_more = !1;
            const i = this.openReviewFormModal.bind(this),
                a = this.closeReviewFormModal.bind(this),
                d = this.showMoreSources.bind(this),
                l = this.onNetworkClick.bind(this),
                _ = this.openNiceJobReviewForm.bind(this),
                u = this.ratingStarMouseover.bind(this),
                m = this.ratingStarMouseout.bind(this),
                b = this.ratingStarClick.bind(this),
                p = this.submitReview.bind(this);
            Object(r.g)(e, "click", i);
            const f = e.getAttribute(r.c),
                E = Object(r.j)(f || "");
            if (!E || !f) throw console.error("ReviewForm: Related modal not found for", e, f, E), new Error("ReviewForm modal not found");
            const h = Object(r.k)("nj-modal-bg", E)[0];
            this.modal = h, this.language = Object(c.a)(h), Object(r.g)(h, "click", a), Object(r.i)("nj-modal-card", "click", e => {
                e.preventDefault(), e.stopPropagation()
            }, h), Object(r.i)("e__nj--open-modal-card", "click", s.b, h), Object(r.i)("nj-close-card", "click", a, h), Object(r.i)("e__nj--review-source--link", "click", l, h), Object(r.i)("e__nj--review-source--nicejob", "click", _, h), Object(r.i)("e__nj--review--submit", "click", p, h), Object(r.i)("e__nj--review-star", "mouseover", u, h), Object(r.i)("e__nj--review-star", "mouseout", m, h), Object(r.i)("e__nj--review-star", "click", b, h), Object(r.i)("e__nj--review-source--more", "click", d, h);
            const O = Object(r.j)("nj-autoclose-modal");
            if (O) {
                const e = O.getAttribute("data-widget") || "REVIEW_FORM";
                if ([o.l, o.i].includes(e)) {
                    O.style.display = "none";
                    const t = Object(r.k)(r.a)[0];
                    t && (Object(s.c)(t), e === o.i && _(Object(r.k)("e__nj--review-source--nicejob")[0]))
                }
            }
            this.sendViewOnLoad()
        }
        openReviewFormModal(e) {
            Object(s.c)(e), this.NiceJob.send(i.a.click, {
                element: this.parent,
                metadata: { ...this.event_metadata,
                    type: "EXPAND"
                }
            })
        }
        closeReviewFormModal(e) {
            e.preventDefault(), e.stopPropagation();
            const t = this.modal;
            t.classList.add("hide");
            const n = Object(r.k)("nj-modal-card", t),
                o = Object(r.k)("nj-modal-card--review--sources", t)[0];
            for (const e of n) e.classList.add("hide");
            o.classList.remove("hide"), this.is_open = !1, this.resetReviewForm(e);
            const s = Object(r.k)("e__nj--review-star", t);
            for (let e = 0; e < s.length; e++) s[e].classList.add("nj-star--muted");
            const a = Object(r.k)("nj-funnel__rating__description", t)[0];
            a.classList.add("nj-funnel__rating__description--muted"), a.textContent = _(0, this.language);
            const c = e.currentTarget || e.target;
            this.NiceJob.send(i.a.click, {
                element: c,
                metadata: { ...this.event_metadata,
                    type: "CLOSE",
                    is_showing_more: this.is_showing_more
                }
            })
        }
        showMoreSources(e) {
            const t = e.currentTarget || e.target,
                n = Object(r.l)(t, "nj-modal-card");
            if (!n) return;
            const o = this.getVisibleNetworks(),
                s = Object(r.k)("e__nj--review-source--link", n);
            for (const e of s) e.classList.remove("hide");
            const a = Object(r.k)("e__nj--review-source--more", n);
            for (const e of a) e.classList.add("hide");
            this.is_showing_more = !0, this.NiceJob.send(i.a.click, {
                element: t,
                metadata: { ...this.event_metadata,
                    type: "SEE_MORE",
                    visible_networks: o
                }
            })
        }
        onNetworkClick(e) {
            const t = e.currentTarget || e.target,
                n = Object(r.l)(t, "e__nj--review-source--link");
            if (!n) return;
            n.classList.add("hide", "visited");
            const {
                network: o
            } = Object(l.a)(n);
            this.NiceJob.send(i.a.click, {
                element: n,
                metadata: { ...this.event_metadata,
                    type: "REDIRECT",
                    network: o,
                    is_showing_more: this.is_showing_more
                }
            });
            const s = Object(r.l)(t, "nj-modal-card");
            if (!s) return;
            const c = Object(r.k)("e__nj--review-source--link", s);
            for (const e of c) e.classList.contains("visited") || e.classList.remove("hide");
            const d = Object(r.k)("e__nj--review-source--more", s);
            for (const e of d) e.classList.add("hide");
            const [_] = Object(r.k)("nj-funnel__title", s), [u] = Object(r.k)("nj-funnel__subtitle", s);
            _.getAttribute("data-original-text") || _.setAttribute("data-original-text", _.innerHTML), u.getAttribute("data-original-text") || u.setAttribute("data-original-text", u.innerHTML), _.innerHTML = `${Object(a.a)({namespace:"common",key:"youre_awesome",language:this.language})} ${_.getAttribute("data-subject-name")}`, u.innerHTML = Object(a.a)({
                namespace: "reviews",
                key: "review_groove",
                language: this.language
            })
        }
        openNiceJobReviewForm(e) {
            const t = Object(s.b)(e, "nj-modal-card--review--form");
            this.is_open = !0, Object(r.o)("TEXTAREA", t)[0].focus()
        }
        ratingStarMouseover(e) {
            const t = e.currentTarget || e.target,
                n = Object(r.l)(t, "nj-funnel__review-via-form");
            if (!n) return;
            const o = Object(r.k)("e__nj--review-star", n);
            let i = !1,
                s = 0;
            for (const e of o) i ? e.classList.add("nj-star--muted") : (e.classList.remove("nj-star--muted"), s++), e === t && (i = !0);
            const a = Object(r.k)("nj-funnel__rating__description", n)[0];
            s > 0 ? a.classList.remove("nj-funnel__rating__description--muted") : a.classList.add("nj-funnel__rating__description--muted"), a.textContent = _(s, this.language)
        }
        ratingStarMouseout(e) {
            const t = e.currentTarget || e.target,
                n = Object(r.l)(t, "nj-funnel__review-via-form");
            if (!n) return;
            const o = Object(r.k)("nj-input--hidden", n)[0],
                i = o.value && parseInt(o.value) || 0,
                s = Object(r.k)("e__nj--review-star", n);
            for (let e = 0; e < s.length; e++) e > i - 1 ? s[e].classList.add("nj-star--muted") : s[e].classList.remove("nj-star--muted");
            const a = Object(r.k)("nj-funnel__rating__description", n)[0];
            a.textContent = _(i, this.language), i > 0 ? a.classList.remove("nj-funnel__rating__description--muted") : a.classList.add("nj-funnel__rating__description--muted")
        }
        ratingStarClick(e) {
            const t = e.currentTarget || e.target,
                n = Object(r.l)(t, null, "FORM");
            for (let e = 0; e < n.length; e++) {
                const o = n[e];
                if ("rating" === o.name) {
                    o.value = t.getAttribute("data-value") || "";
                    break
                }
            }
        }
        submitReview(e) {
            const t = e.currentTarget || e.target;
            if (t.classList.contains(r.e)) return;
            const n = Object(r.l)(t, null, "FORM"),
                i = {},
                c = this.modal;
            for (let e = 0; e < n.length; e++) {
                const t = n[e],
                    {
                        value: o,
                        type: r
                    } = t,
                    s = t.name;
                "checkbox" === r || (i[s] = "rating" === s ? parseInt(o.trim()) : o.trim())
            }
            if (!(i.rating && i.name && i.content && i.email)) return console.error("submitReview error:", "Missing data"), Object(s.a)({
                form: o.l,
                error: Object(a.a)({
                    language: this.language,
                    namespace: "common",
                    key: "review_validation"
                }),
                modal: c
            });
            if (!r.d.test(i.email)) return Object(s.a)({
                form: o.l,
                error: Object(a.a)({
                    language: this.language,
                    namespace: "common",
                    key: "email_validation"
                }),
                modal: c
            });
            t.classList.add(r.e);
            const {
                company_id: d,
                reviewly: l,
                SDK_CREATE_REVIEW_URL: u
            } = Object(r.m)(), {
                session_id: m,
                pageview_id: b,
                csrf_token: p
            } = Object(r.n)();
            Object(r.q)({
                body: {
                    review: i,
                    session_id: m,
                    pageview_id: b,
                    csrf_token: p,
                    company_id: d,
                    reviewly: l
                },
                url: u
            }).then(n => {
                if (n.error) return console.error("submitReview submission error:", n.error), Object(s.a)({
                    form: o.l,
                    error: Object(a.a)({
                        namespace: "common",
                        key: "submit_error",
                        language: this.language
                    }),
                    modal: c
                });
                t.classList.remove(r.e);
                const {
                    rating: d
                } = i;
                if (!d) return;
                let l;
                l = d >= 4 ? Object(s.b)(e, "nj-modal-card--review--success--positive") : Object(s.b)(e, "nj-modal-card--review--success--negative"), Object(r.k)("nj-review-response--rating", l)[0].textContent = "".repeat(d), Object(r.k)("nj-review-response--rating-string", l)[0].textContent = _(d, this.language), Object(r.k)("nj-review-response--content", l)[0].textContent = i.content
            })
        }
        getVisibleNetworks() {
            const e = Object(r.k)("e__nj--review-source--link", this.modal),
                t = [];
            for (const n of e)
                if (!n.classList.contains("hide")) {
                    const e = Object(l.a)(n),
                        o = null == e ? void 0 : e.network;
                    o && t.push(o)
                }
            return t
        }
        resetReviewForm(e) {
            const t = e.currentTarget || e.target,
                n = Object(r.l)(t, "nj-modal-bg");
            if (!n) return;
            const o = Object(r.k)("e__nj--review-source--link", n);
            for (const e of o) e.classList.remove("visited"), e.classList.contains("nj--hidden-by-default") ? e.classList.add("hide") : e.classList.remove("hide");
            const [i] = Object(r.k)("nj-funnel__title", n), [s] = Object(r.k)("nj-funnel__subtitle", n);
            i.innerHTML = (null == i ? void 0 : i.getAttribute("data-original-text")) || i.innerHTML, s.innerHTML = (null == s ? void 0 : s.getAttribute("data-original-text")) || s.innerHTML;
            const a = Object(r.k)("e__nj--review-source--more", n);
            for (const e of a) e.classList.remove("hide");
            this.is_showing_more = !1
        }
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return _
    }));
    var o = n(2),
        i = n(4),
        r = n(1),
        s = n(3),
        a = n(9),
        c = n(7);
    const d = 7e3,
        l = 7e3;
    class _ extends a.a {
        constructor(e, t, n) {
            super(e, t, n, o.C), this.mobile_hide = "hide" === e.getAttribute("data-mobile");
            const i = this.closeCard.bind(this),
                a = this.expandCard.bind(this),
                c = this.loadMoreStories.bind(this),
                l = this.closeViaMask.bind(this);
            Object(r.c)("e__nj-social-proof-card--close", "click", i, e), Object(r.c)("e__nj-social-proof-card--open", "click", a, e), Object(r.c)("e__nj-social-proof-card--more-stories", "click", c, e), Object(r.c)("e__nj-social-proof--mask-click", "click", l);
            const _ = parseInt(e.getAttribute(s.c)),
                u = Date.now() - _,
                m = Math.max(0, d - u),
                b = Object(r.e)("nj-social-proof--events--active", e)[0];
            this.queueNextCard({
                active_container: b,
                dt_reveal: m
            }), this.sendViewOnLoad()
        }
        closeCard(e, t) {
            const n = e && (e.currentTarget || e.target) || void 0,
                o = n || t;
            if (!o) return console.error("socialProofCloseCard el not found");
            const s = Object(r.f)(o, "nj-card--pulse");
            if (!s) return console.error("socialProofCloseCard card not found for", o, {
                event: e,
                input_element: t
            });
            this.toggleExpansionMask(!1);
            const a = s.parentNode,
                d = !!s.classList.contains("nj-card--pulse--expanded"),
                _ = !!a.classList.contains("nj-social-proof--events--active--visible"),
                u = !d && _ && !!e;
            if (d) this.unexpandCard(s, e), setTimeout(() => {
                this.conditonalCloseCard(s)
            }, .8 * l);
            else if (_) {
                a.classList.remove("nj-social-proof--events--active--visible");
                if (!u) {
                    setTimeout(() => {
                        this.queueNextCard({
                            active_container: a
                        })
                    }, 300 + 50)
                }
            }
            if (u) {
                const e = Object(r.e)("nj-card--pulse--snippet-content", s)[0],
                    t = Object(c.a)(e);
                this.NiceJob.send(i.a.click, {
                    element: n,
                    metadata: { ...this.event_metadata,
                        type: "CLOSE",
                        ...t
                    }
                })
            }
        }
        queueNextCard(e) {
            const {
                active_container: t,
                dt_reveal: n = d,
                dt_close: o = l
            } = e;
            for (; t.children.length;) t.removeChild(t.children[0]);
            const s = t.parentNode,
                a = Object(r.e)("nj-social-proof--events--hidden", s)[0].children[0];
            a && (t.appendChild(a), setTimeout(() => {
                const e = window.innerWidth;
                if (!this.mobile_hide || e >= 568) {
                    t.classList.add("nj-social-proof--events--active--visible");
                    const e = Object(r.e)("nj-card--pulse", t)[0],
                        n = Object(r.e)("nj-card--pulse--snippet-content", e)[0],
                        o = Object(c.a)(n);
                    this.NiceJob.send(i.a.view, {
                        element: e,
                        metadata: { ...this.event_metadata,
                            type: "MINIMIZED",
                            ...o
                        }
                    })
                }
                setTimeout(() => {
                    this.conditonalCloseCard(a)
                }, o)
            }, n))
        }
        conditonalCloseCard(e) {
            e.parentNode && (e.classList.contains("nj-card--pulse--expanded") || this.closeCard(null, e))
        }
        expandCard(e) {
            const t = e.currentTarget || e.target,
                n = Object(r.f)(t, "nj-card--pulse");
            if (!n || n.classList.contains("nj-card--pulse--expanded")) return;
            const o = Object(r.e)("nj-card--pulse--snippet-content", n)[0],
                s = Object(r.e)("nj-card--pulse--expansion-content", n)[0];
            if (!s) return;
            const a = Object(r.e)("nj-review__media", s);
            for (const e of a) {
                if (e.hasAttribute("data-photo-loaded")) continue;
                e.setAttribute("data-photo-loaded", "1");
                const t = e.getAttribute("data-photo-url");
                e.style.backgroundImage = `url('${t}')`, Object(r.k)({
                    tag: "IMG",
                    parent: e,
                    classes: ["nj-review__media--img"],
                    options: {
                        src: t
                    }
                })
            }
            const d = [...s.children].reduce((e, t) => {
                const n = t;
                return n.classList.contains("nj-icon") ? e : e + n.offsetHeight
            }, 0);
            n.style.height = Math.min(400, d, window.innerHeight - 40) + "px";
            n.classList.add("nj-card--pulse--expanded"), o.classList.remove("nj-card--pulse--snippet-content--visible"), this.toggleExpansionMask(!0);
            Object(r.e)("nj-icon--close", n)[0].textContent = "h", setTimeout(() => {
                s.classList.add("nj-card--pulse--expansion-content--visible")
            }, 150);
            const l = Object(c.a)(o);
            this.NiceJob.send(i.a.click, {
                element: t,
                metadata: { ...this.event_metadata,
                    type: "EXPAND",
                    ...l
                }
            });
            const _ = Object(c.a)(s);
            this.NiceJob.send(i.a.view, {
                element: n,
                metadata: { ...this.event_metadata,
                    type: "EXPANDED",
                    ..._
                }
            });
            const m = u(s, !0);
            this.NiceJob.send(i.a.view, {
                element: n,
                metadata: { ...this.event_metadata,
                    type: "EXPANDED",
                    subtype: "MORE_EVENTS",
                    ...m
                }
            })
        }
        unexpandCard(e, t) {
            if (!e.classList.contains("nj-card--pulse--expanded")) return;
            const n = Object(r.e)("nj-card--pulse--snippet-content", e)[0],
                o = Object(r.e)("nj-card--pulse--expansion-content", e)[0];
            e.style.height = "", e.classList.remove("nj-card--pulse--expanded"), n.classList.add("nj-card--pulse--snippet-content--visible"), this.toggleExpansionMask(!1);
            Object(r.e)("nj-icon--close", e)[0].textContent = "", o.classList.remove("nj-card--pulse--expansion-content--visible");
            const s = Object(c.a)(o),
                a = t && (t.currentTarget || t.target) || void 0;
            this.NiceJob.send(i.a.click, {
                element: a,
                metadata: { ...this.event_metadata,
                    type: "MINIMIZE",
                    ...s
                }
            })
        }
        closeViaMask() {
            const e = Object(r.e)("nj-card--pulse--expanded", this.parent)[0];
            this.closeCard(null, e)
        }
        loadMoreStories(e) {
            const t = e.currentTarget || e.target,
                n = Object(r.f)(t, "nj-link--expanded-card");
            if (!n || n.classList.contains(s.k)) return;
            const o = Object(r.f)(t, "nj-card--pulse");
            if (!o || !o.classList.contains("nj-card--pulse--expanded")) return;
            n.classList.add(s.k);
            const a = Object(r.e)("nj--pulse--stories-container", o)[0],
                d = [...Object(r.e)("nj-story--pulse", a)].filter(e => !e.classList.contains("nj-story--pulse--visible")),
                l = d.slice(0, 3);
            l.forEach(e => {
                e.classList.add("nj-story--pulse--loading")
            });
            const _ = Object(r.e)("nj-card--pulse--expansion-content", o)[0],
                m = _.scrollTop,
                b = Object(r.f)(n, "nj-footer");
            if (!b) return console.error("socialProofLoadMoreStories footer not found");
            const p = o.offsetHeight - b.offsetHeight;
            Object(r.m)({
                el: _,
                from: m,
                to: m + p,
                dt: 300
            });
            const f = d.length > 3,
                E = Object(r.e)("nj-card--pulse--expansion-content", o)[0],
                h = u(E);
            setTimeout(() => {
                l.forEach(e => {
                    e.classList.remove("nj-story--pulse--loading"), e.classList.add("nj-story--pulse--visible")
                }), f ? n.classList.remove(s.k) : n.style.display = "none";
                const e = u(E, !0);
                this.NiceJob.send(i.a.view, {
                    element: o,
                    metadata: { ...this.event_metadata,
                        type: "EXPANDED",
                        subtype: "MORE_EVENTS",
                        ...e
                    }
                })
            }, 300);
            const O = Object(c.a)(E);
            this.NiceJob.send(i.a.click, {
                element: t,
                metadata: { ...this.event_metadata,
                    type: "SEE_MORE",
                    subtype: "MORE_EVENTS",
                    ...O,
                    ...h
                }
            })
        }
        toggleExpansionMask(e) {
            const t = Object(r.e)("nj-social-proof--mask", this.parent)[0];
            t && e ? t.classList.add("nj-social-proof--mask--visible") : t && t.classList.remove("nj-social-proof--mask--visible")
        }
    }

    function u(e, t = !1) {
        const n = {
                story_ids: [],
                review_ids: [],
                photo_ids: []
            },
            o = Object(r.e)("nj--pulse--stories-container", e)[0],
            i = Object(r.e)("nj-story--pulse", o);
        for (const e of i) {
            if (!e.classList.contains("nj-story--pulse--visible") || t && e.hasAttribute("data-handled")) continue;
            e.setAttribute("data-handled", "1");
            const {
                story_id: o,
                review_id: i,
                photo_id: r
            } = Object(c.a)(e);
            o && n.story_ids.push(o), i && n.review_ids.push(i), r && n.photo_ids.push(r)
        }
        return n
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return l
    }));
    var o = n(12),
        i = n(2),
        r = n(4),
        s = n(0),
        a = n(15),
        c = n(9),
        d = n(7);
    class l extends c.a {
        constructor(e, t, n) {
            super(e, t, n, i.D), this.cards = Object(s.k)("nj-card", e), this.attachEventListeners(e);
            const o = this.alignStoriesGrid.bind(this);
            Object(s.g)(window, "resize", o), Object(s.g)(window, "resize", () => {
                setTimeout(() => {
                    o()
                }, 50)
            });
            const r = Object(s.k)("nj--stories-cards--grid", e)[0];
            r && o(null, r), this.sendViewOnLoad()
        }
        attachEventListeners(e) {
            const t = this.photoDimensions.bind(this),
                n = this.scrollPhotos.bind(this),
                o = this.openShareMenu.bind(this),
                i = this.onShareRedirect.bind(this),
                r = this.seeMoreReviewContent.bind(this),
                a = this.loadMoreStories.bind(this),
                c = this.storyShareClose.bind(this),
                d = this.storyCopyLink.bind(this);
            Object(s.i)("nj-media__photo", "load", t, e), Object(s.i)("e__nj-nav", "click", n, e), Object(s.i)("e__nj-share", "click", o, e), Object(s.i)("e__nj-share-redirect", "click", i, e), Object(s.i)("nj-close-card", "click", c, e), Object(s.i)("e__nj-see-more", "click", r, e), Object(s.i)("e__nj-load-more-stories", "click", a, e), Object(s.i)("nj-funnel__button--copy-link", "click", d, e)
        }
        photoDimensions(e, t = !1) {
            const n = e.target || e,
                i = Object(s.l)(n, "nj-media__container");
            if (!i) return;
            i.classList.remove(s.e);
            const r = i.offsetWidth;
            let a = 0;
            const c = Object(s.k)("nj-media__photo", i);
            for (const e of c) {
                const {
                    dataset: t,
                    naturalWidth: n,
                    naturalHeight: i
                } = e, {
                    originalWidth: s = "",
                    originalHeight: c = ""
                } = t, d = parseInt(s) || n, l = parseInt(c) || i, _ = d / l;
                a = _ > o.a.STORY.MAX_ASPECT_RATIO ? r / o.a.STORY.MAX_ASPECT_RATIO : _ < o.a.STORY.MIN_ASPECT_RATIO ? r / o.a.STORY.MIN_ASPECT_RATIO : l / d * r
            }
            i.style.height = (a || o.a.STORY.MAX_HEIGHT) + "px";
            for (const e of c) {
                const {
                    dataset: t,
                    naturalWidth: n,
                    naturalHeight: o
                } = e, {
                    originalWidth: i = "",
                    originalHeight: c = ""
                } = t, d = (parseInt(i) || n || 0) / (parseInt(c) || o || 1), l = {};
                d > r / a ? (l.height = a, l.width = a * d) : (l.width = r, l.height = r / d), e.style.width = l.width + "px", e.style.height = l.height + "px";
                const _ = Object(s.l)(e, "nj-media__photo--wrap");
                _ && (_.style.width = r + "px")
            }
            const d = Object(s.l)(n, "nj--stories-cards"),
                l = d && d.classList.contains("nj--stories-cards--grid");
            d && l && !t && this.alignStoriesGrid(null, d);
            const _ = Object(s.l)(n, "nj-card");
            _ && this.scrollPhotos(null, _)
        }
        scrollPhotos(e, t) {
            const n = e && (e.currentTarget || e.target) || void 0,
                o = t || n && Object(s.l)(n, "nj-card"),
                a = o && Object(s.k)("nj-media__container--wrap", o)[0];
            if (!o || !a) return;
            const c = a.hasAttribute("data-index") ? parseInt(a.getAttribute("data-index")) : 0;
            let l = c;
            if (n && n.hasAttribute("data-direction")) {
                l += "back" === n.getAttribute("data-direction") ? -1 : 1
            }
            n && n.hasAttribute("data-index") && (l = parseInt(n.getAttribute("data-index")));
            const _ = Object(s.k)("nj-media__photo", a).length;
            l < 0 ? l = _ - 1 : l >= _ && (l = 0);
            const u = a.offsetWidth * -l;
            a.setAttribute("data-index", l.toString()), a.style.transform = `translateX(${u}px)`;
            const m = Object(s.k)("nj-media__nav-dots__feature", o);
            for (let e = 0; e < m.length; e++) l === e ? m[e].classList.add("nj-media__nav-dots--active") : m[e].classList.remove("nj-media__nav-dots--active");
            if (e) {
                const e = Object(d.a)(o),
                    t = e.photo_ids[c];
                this.NiceJob.send(r.a.click, {
                    element: n,
                    metadata: {
                        widget: i.D,
                        subtype: "PHOTOS",
                        type: "SEE_MORE",
                        active_photo_id: t,
                        ...e
                    }
                })
            }
        }
        openShareMenu(e) {
            const t = e.currentTarget || e.target,
                n = t.getAttribute("data-share-url") || "",
                o = Object(s.k)("nj-modal-bg")[0],
                a = Object(s.k)("nj-modal-card--share")[0],
                c = Object(s.k)("nj-funnel__channel", a),
                l = Object(s.k)("nj-funnel__copy-link__content", a)[0];
            for (const e of c) {
                const t = e.getAttribute("href"),
                    o = (null == t ? void 0 : t.replace("{share_url}", n)) || "";
                e.setAttribute("href", o)
            }
            l.innerHTML = n.length > 30 ? n.substr(0, 27) + "..." : n, l.setAttribute("data-share-url", n), o.classList.remove("hide"), setTimeout(() => {
                a.classList.add("nj-modal-card--visible")
            }, .01), a.style.display = "flex";
            const _ = Object(s.l)(t, "nj-card");
            if (!_) return;
            a.setAttribute("data-metadata", _.getAttribute("data-metadata") || "");
            const u = Object(d.a)(_);
            this.NiceJob.send(r.a.click, {
                element: t,
                metadata: {
                    widget: i.D,
                    subtype: "SHARE",
                    type: "EXPAND",
                    ...u
                }
            })
        }
        onShareRedirect(e) {
            const t = e.currentTarget || e.target,
                n = Object(s.l)(t, "e__nj-share-redirect"),
                o = Object(s.l)(t, "nj-card") || Object(s.l)(t, "nj-modal-card--share");
            if (!n || !o) return;
            const a = Object(d.a)(n),
                c = Object(d.a)(o);
            this.NiceJob.send(r.a.click, {
                element: n,
                metadata: {
                    widget: i.D,
                    subtype: "SHARE",
                    type: "REDIRECT",
                    ...c,
                    ...a
                }
            })
        }
        storyShareClose(e) {
            e.preventDefault();
            const t = Object(s.k)("nj-modal-card--share")[0],
                n = Object(s.k)("nj-modal-bg")[0];
            t.classList.remove("nj-modal-card--visible"), window.innerWidth <= 767 ? setTimeout(() => {
                n.classList.add("hide")
            }, 100) : n.classList.add("hide")
        }
        storyCopyLink(e) {
            var t, n, o;
            e.preventDefault();
            const a = Object(s.k)("nj-modal-card--share")[0],
                c = Object(s.k)("nj-funnel__copy-link__content", a)[0],
                l = document.createElement("div");
            l.style.opacity = "0", l.style.height = "0", l.innerHTML = c.getAttribute("data-share-url") || "", document.body.appendChild(l);
            const _ = document.createRange();
            _.selectNode(l), null === (t = window.getSelection()) || void 0 === t || t.removeAllRanges(), null === (n = window.getSelection()) || void 0 === n || n.addRange(_), document.execCommand("copy");
            const u = Object(s.k)("nj-funnel__copy-link", a)[0],
                m = Object(s.k)("nj-funnel__copy-link", a)[1];
            u.classList.add("hide"), m.classList.remove("hide"), setTimeout(() => {
                u.classList.remove("hide"), m.classList.add("hide")
            }, 4e3), null === (o = l.parentNode) || void 0 === o || o.removeChild(l);
            const b = e.currentTarget || e.target;
            if (!b || !a) return;
            const p = Object(d.a)(a);
            this.NiceJob.send(r.a.click, {
                element: b,
                metadata: {
                    widget: i.D,
                    subtype: "SHARE",
                    type: "COPY",
                    ...p
                }
            })
        }
        seeMoreReviewContent(e) {
            const t = e.currentTarget || e.target,
                n = Object(s.l)(t, "nj--see-more--wrap"),
                o = Object(s.l)(t, "nj-card");
            if (!n || !o) return;
            const a = Object(s.k)("nj--see-more--short", n)[0],
                c = Object(s.k)("nj--see-more--all", n)[0],
                l = Object(s.k)("e__nj-see-more", n)[0];
            a.style.display = "none", c.style.display = "block", l.style.display = "none";
            const _ = Object(s.l)(n, "nj--stories-cards"),
                u = _ && _.classList.contains("nj--stories-cards--grid");
            _ && u && this.alignStoriesGrid(null, _);
            const m = Object(d.a)(o);
            this.NiceJob.send(r.a.click, {
                element: t,
                metadata: {
                    widget: i.D,
                    subtype: "CONTENT",
                    type: "SEE_MORE",
                    ...m
                }
            })
        }
        loadMoreStories(e) {
            const t = e.currentTarget || e.target,
                n = Object(s.l)(t, "nj-container");
            if (!n || !n.parentNode) return console.error("nj-container not found for target node", t);
            const o = t.getAttribute("data-cursor");
            if (!o) return;
            const c = n.parentNode,
                d = Object(s.h)(c),
                l = Object(s.k)("nj-loader", n)[0],
                _ = Object(s.k)("nj-loader__media", l)[0];
            _.classList.remove("hide"), t.classList.add("hide"), this.NiceJob.send(r.a.click, {
                element: t,
                metadata: { ...this.event_metadata,
                    widget: i.D,
                    type: "SEE_MORE"
                }
            });
            const {
                company_id: u,
                reviewly: m,
                SDK_LOAD_MORE_URL: b
            } = Object(s.m)(), {
                session_id: p
            } = Object(s.n)();
            Object(s.q)({
                body: {
                    cursor: o,
                    company_id: u,
                    reviewly: m,
                    dataset: d,
                    session_id: p
                },
                url: b
            }).then(e => {
                const {
                    content: o,
                    cursor: i,
                    event_metadata: c
                } = e, d = Object(s.k)("nj--stories-cards", n)[0], l = d.classList.contains("nj--stories-cards--grid");
                let u = "nj--stories-cards";
                l && (u += " nj--stories-cards--grid");
                const m = Object(s.p)({
                    tag: "DIV",
                    classes: u
                });
                m.innerHTML = o, this.attachEventListeners(m);
                const b = Object(s.k)("nj--stories-cards--wrap", d)[0],
                    p = [];
                for (; m.children.length;) {
                    const e = m.children[0];
                    b.appendChild(e), p.push(e)
                }
                l && this.alignStoriesGrid(null, d), _.classList.add("hide"), i && (t.classList.remove("hide"), t.setAttribute("data-cursor", i)), this.event_metadata = c;
                const f = Object(a.a)(c);
                this.NiceJob.send(r.a.view, {
                    element: this.parent,
                    metadata: f
                })
            })
        }
        alignStoriesGrid(e, t, n) {
            var o;
            const i = t ? [t] : Object(s.k)("nj--stories-cards--grid"),
                r = [];
            for (const t of i) {
                const i = t.offsetWidth,
                    a = 767,
                    c = i > a ? 5 : 0,
                    d = i > a ? 2 * c + 350 : i,
                    l = Math.max(1, Math.floor(i / d)),
                    u = `calc(${Math.floor(100/l)}% - ${2*c}px)`,
                    m = [];
                for (let e = 0; e < l; e++) m[e] = [];
                const b = Object(s.k)("nj-card--grid", t),
                    p = b[0].parentElement;
                if (!p) throw new Error("grid_wrap  not found!");
                const f = window.scrollY,
                    E = Object(s.p)({
                        tag: "DIV",
                        parent: document.body,
                        style: {
                            position: "absolute",
                            top: "0",
                            zIndex: "-1",
                            visibility: "hidden"
                        }
                    });
                for (let e = b.length - 1; e >= 0; e--) b[e].classList.contains("nj-card--grid--empty") && p.removeChild(b[e]);
                const h = [...b];
                h.forEach((e, t) => {
                    e.hasAttribute("data-card-initial-index") || e.setAttribute("data-card-initial-index", t.toString())
                });
                for (let e = b.length - 1; e >= 0; e--) p.removeChild(b[e]);
                const O = (l - h.length % l) % l;
                for (let e = 0; e < O; e++) {
                    const e = h[0].cloneNode();
                    e.classList.add("nj-card--grid--empty"), e.style.height = "0", e.style.overflow = "hidden", e.style.visibility = "hidden", h.push(e)
                }
                for (const e of h) e.style.width = u, e.style.top = "0";
                const g = 10,
                    j = [];
                for (let e = 0; e < l; e++) j[e] = 0;
                const A = Math.ceil(h.length / l);
                for (let e = 0; e < A; e++) {
                    const t = [...h].filter((t, n) => n >= e * l && n < (e + 1) * l);
                    t.forEach(e => E.appendChild(e)), t.sort((t, n) => e > 0 && t.offsetHeight - n.offsetHeight || parseInt(n.getAttribute("data-card-initial-index") || h.length) - parseInt(t.getAttribute("data-card-initial-index") || h.length)), t.forEach(e => E.removeChild(e)), j.map((e, t) => ({
                        index: t,
                        bottom: e
                    })).sort((e, t) => t.bottom - e.bottom || t.index - e.index).map((e, n) => ({ ...e,
                        card: t[n]
                    })).sort((e, t) => e.index - t.index).forEach(({
                        index: t,
                        card: n
                    }) => {
                        if (p.appendChild(n), e > 0) {
                            const e = m[t][m[t].length - 1],
                                o = e.offsetTop + e.offsetHeight + g - n.offsetTop;
                            n.style.top = Math.round(o) + "px"
                        }
                        m[t].push(n);
                        const o = _(n) + n.offsetHeight;
                        j[t] = o
                    })
                }
                const v = Math.max(...Object.values(j)),
                    R = Object(s.k)("nj--stories-cards--wrap", t)[0],
                    T = _(R);
                if (R.style.height = Math.round(v - T + 10) + "px", null === (o = E.parentNode) || void 0 === o || o.removeChild(E), window.scrollTo(window.scrollX, f), e && !n) {
                    const e = Object(s.k)("nj-media__photo", t);
                    for (let t = 0; t < e.length; t++) r.push(e[t])
                }
            }
            if (e && !n) {
                for (let e = 0; e < r.length; e++) this.photoDimensions(r[e], !0);
                this.alignStoriesGrid(e, null, !0)
            }
        }
    }

    function _(e) {
        const t = Object(s.o)("HTML")[0],
            n = t.getBoundingClientRect && t.getBoundingClientRect().top || 0;
        return e.getBoundingClientRect ? e.getBoundingClientRect().top - n : e.offsetTop
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return r
    }));
    var o = n(2),
        i = n(9);
    class r extends i.a {
        constructor(e, t, n) {
            super(e, t, n, o.F), this.sendViewOnLoad()
        }
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return m
    }));
    const o = ["Android", "Windows", "Macintosh", "iPhone", "iPad"];
    var i = n(2),
        r = n(4),
        s = n(1),
        a = n(0),
        c = n(5),
        d = n(6),
        l = n(11),
        _ = n(9),
        u = n(7);
    class m extends _.a {
        constructor(e, t, n) {
            super(e, t, n, i.j), this.card = "INIT", this.from_email = "", this.from_name = "", this.is_submitting = !1, this.has_been_opened = !1, this.show_sms = !0;
            const r = this.openRecommendationModal.bind(this),
                d = this.closeRecommendationModal.bind(this),
                _ = this.submitFromEmail.bind(this),
                u = this.skipFromEmail.bind(this),
                m = this.showMoreNetworks.bind(this),
                b = this.onNetworkClick.bind(this),
                p = this.copyShareLink.bind(this),
                f = this.submitRecommendation.bind(this);
            this.bypassInitModal.bind(this);
            Object(s.a)(e, "click", r);
            const E = e.getAttribute(a.c),
                h = Object(s.d)(E || "");
            if (!h || !E) throw console.error("Recommendation: Related modal not found for", e, E, h), new Error("Recommendation modal not found");
            const O = Object(s.e)("nj-modal-bg", h)[0];
            if (this.modal = O, this.form = O, this.language = Object(l.a)(O), this.init_modal_card = Object(s.e)("nj-modal-card--recommendation-init", O)[0], this.share_modal_card = Object(s.e)("nj-modal-card--recommendation-share", O)[0], this.show_sms = function(e) {
                    let t = !1;
                    return o.forEach(n => {
                        e.match(n) && (t = !0)
                    }), t
                }(navigator.userAgent || ""), !this.show_sms) {
                const e = Object(s.e)("nj-recommendation--sms", O)[0];
                e && e.classList.add("hide")
            }
            Object(s.c)("nj-modal-card", "click", e => {
                e.preventDefault(), e.stopPropagation()
            }, O), Object(s.c)("e__nj--open-modal-card", "click", c.b, O), Object(s.c)("nj-close-card", "click", d, O), Object(s.c)("e__nj--recommendation--from-email", "click", _, O), Object(s.c)("e__nj--recommendation--from-email-skip", "click", u, O), Object(s.c)("e__nj--recommendation--see-more-networks", "click", m, O), Object(s.c)("e__nj--recommendation-network--link", "click", b, O), Object(s.c)("e__nj--recommendation-share-copy", "click", p, O), Object(s.c)("e__nj--recommendation--submit", "click", f, O);
            const g = Object(s.d)("nj-autoclose-modal");
            if (g) {
                if (g.getAttribute("data-widget") === i.j) {
                    g.style.display = "none";
                    const e = Object(s.e)(a.a)[0];
                    e && Object(c.c)(e)
                }
            }
            this.sendViewOnLoad(), this.modal && this.bypassInitModal()
        }
        bypassInitModal() {
            for (let e = 0; e < this.form.length; e++) {
                const t = this.form[e];
                "from_email" === t.name && t.value && this.submitFromEmail(null, !0)
            }
        }
        openRecommendationModal(e) {
            this.init_modal_card.classList.remove("hide"), this.share_modal_card.classList.add("hide"), this.has_been_opened || this.bypassInitModal(), Object(c.c)(e), this.has_been_opened = !0, this.NiceJob.send(r.a.click, {
                element: this.parent,
                metadata: { ...this.event_metadata,
                    type: "EXPAND"
                }
            })
        }
        closeRecommendationModal(e) {
            e.preventDefault(), e.stopPropagation();
            const t = this.modal;
            t.classList.add("hide");
            const n = Object(s.e)("nj-modal-card", t);
            for (const e of n) e.classList.add("hide");
            const o = e.currentTarget || e.target;
            this.NiceJob.send(r.a.click, {
                element: o,
                metadata: { ...this.event_metadata,
                    card: this.card,
                    type: "CLOSE"
                }
            })
        }
        submitFromEmail(e, t = !1) {
            var n;
            this.from_email = "", this.from_name = "";
            let o = null,
                r = null;
            const l = this.modal;
            for (let e = 0; e < this.form.length; e++) {
                const t = this.form[e];
                if ("from_email" === t.name && t.value) {
                    const e = t.value.trim().toLowerCase();
                    this.from_email = e, r = t
                } else if ("from_name" === t.name && t.value) {
                    const e = t.value.trim();
                    this.from_name = e, o = t
                }
            }
            const _ = this.from_email && a.d.test(String(this.from_email).toLowerCase());
            if (!t && !_) return Object(c.a)({
                form: i.j + "--from",
                error: Object(d.a)({
                    namespace: "common",
                    key: "email_validation",
                    language: this.language
                }),
                modal: l
            });
            if (!this.from_email) return void(r && (r.value = ""));
            if (!t && !this.from_name) return Object(c.a)({
                form: i.j + "--from",
                error: Object(d.a)({
                    namespace: "recommendation",
                    key: "name_validation",
                    language: this.language
                }),
                modal: l
            });
            if (!this.from_name) return;
            if (Object(c.a)({
                    form: i.j + "--from",
                    reset: !0,
                    modal: l
                }), t) return this.showShareCard();
            const u = null === (n = Object(s.e)("nj-recommendation--email-submit")) || void 0 === n ? void 0 : n[0];
            null == u || u.classList.add(a.e);
            const {
                company_id: m,
                reviewly: b,
                SDK_CREATE_REFERRAL_FROM_PERSON_URL: p
            } = Object(a.m)(), {
                session_id: f,
                pageview_id: E,
                csrf_token: h
            } = Object(a.n)();
            Object(s.l)({
                url: p,
                body: {
                    referrer: {
                        from_name: this.from_name,
                        from_email: this.from_email
                    },
                    session_id: f,
                    pageview_id: E,
                    csrf_token: h,
                    company_id: m,
                    reviewly: b
                }
            }).then(() => {
                this.showShareCard()
            }).catch(() => Object(c.a)({
                form: i.j + "--from",
                error: Object(d.a)({
                    namespace: "common",
                    key: "submit_error",
                    language: this.language
                }),
                modal: l
            })).finally(() => {
                null == u || u.classList.remove(a.e)
            })
        }
        skipFromEmail() {
            this.from_email = "", this.showShareCard()
        }
        showShareCard() {
            this.init_modal_card.classList.add("hide"), this.share_modal_card.classList.remove("hide"), this.NiceJob.send(r.a.click, {
                element: this.parent,
                metadata: { ...this.event_metadata,
                    card: this.card,
                    type: "PROCEED"
                }
            }), this.card = "SHARE"
        }
        onNetworkClick(e) {
            const t = e.currentTarget || e.target,
                n = Object(s.f)(t, "e__nj--recommendation-network--link");
            if (!n) return;
            const {
                network: o
            } = Object(u.a)(n);
            this.NiceJob.send(r.a.click, {
                element: n,
                metadata: { ...this.event_metadata,
                    type: "REDIRECT",
                    network: o,
                    card: this.card
                }
            })
        }
        copyShareLink(e) {
            const t = Object(s.e)("nj-recommendation--network--copy-input", this.modal)[0];
            if (navigator.clipboard) navigator.clipboard.writeText(t.value);
            else if (t.select) t.select(), t.setSelectionRange(0, t.value.length), document.execCommand("copy"), t.blur();
            else if (document.selection && document.body.createTextRange) {
                const e = document.body.createTextRange();
                e.moveToElementText(t), e.select(), document.execCommand("copy")
            }
            const n = Object(s.e)("nj-recommendation--network-name-success-fill", this.modal)[0];
            n.classList.add("nj-recommendation--network-name-success-fill--visible"), setTimeout(() => {
                n.classList.remove("nj-recommendation--network-name-success-fill--visible")
            }, 1200);
            const o = e.currentTarget || e.target;
            this.NiceJob.send(r.a.click, {
                element: o,
                metadata: { ...this.event_metadata,
                    card: this.card,
                    type: "SHARE",
                    subtype: "COPY"
                }
            })
        }
        showMoreNetworks(e) {
            const t = e.currentTarget || e.target,
                n = Object(s.e)("nj-recommendation--network--hidden");
            for (const e of n) e.classList.remove("nj-recommendation--network--hidden");
            t.classList.add("hide"), this.NiceJob.send(r.a.click, {
                element: t,
                metadata: { ...this.event_metadata,
                    card: this.card,
                    type: "SEE_MORE"
                }
            })
        }
        submitRecommendation(e) {
            const t = e.currentTarget || e.target;
            if (this.is_submitting) return;
            const n = this.modal;
            t.classList.remove("nj-figma-submit--loading"), t.classList.remove("nj-figma-submit--success");
            let o = "";
            for (let e = 0; e < this.form.length; e++) {
                const t = this.form[e];
                "to_email" === t.name && t.value && (o = t.value.trim())
            }
            if (!(o && a.d.test(String(o).toLowerCase()))) return console.error(`Invalid to_email! "${this.from_email}"`), Object(c.a)({
                form: i.j + "--to",
                error: Object(d.a)({
                    namespace: "common",
                    key: "email_validation",
                    language: this.language
                }),
                modal: n
            });
            Object(c.a)({
                form: i.j + "--to",
                reset: !0,
                modal: n
            }), t.classList.add("nj-figma-submit--loading");
            const {
                company_id: l,
                reviewly: _,
                SDK_CREATE_RECOMMENDATION_URL: u
            } = Object(a.m)(), {
                session_id: m,
                pageview_id: b,
                csrf_token: p
            } = Object(a.n)();
            this.is_submitting = !0, Promise.all([new Promise(e => {
                setTimeout(() => {
                    e(void 0)
                }, 800)
            }), Object(s.l)({
                url: u,
                body: {
                    recommendation: {
                        from_name: this.from_name,
                        from_email: this.from_email,
                        to_email: o
                    },
                    session_id: m,
                    pageview_id: b,
                    csrf_token: p,
                    company_id: l,
                    reviewly: _
                }
            })]).then(([e, o]) => {
                if (this.is_submitting = !1, o.error) return t.classList.remove("nj-figma-submit--loading"), this.NiceJob.send(r.a.click, {
                    element: t,
                    metadata: { ...this.event_metadata,
                        card: this.card,
                        type: "SUBMIT",
                        subtype: "ERROR",
                        error: "There was an error on our end. Please try again!",
                        error_type: "res"
                    }
                }), Object(c.a)({
                    form: i.j + "--to",
                    error: Object(d.a)({
                        namespace: "common",
                        key: "submit_error",
                        language: this.language
                    }),
                    modal: n
                });
                t.classList.add("nj-figma-submit--success"), setTimeout(() => {
                    t.classList.remove("nj-figma-submit--loading")
                }, 200), setTimeout(() => {
                    t.classList.remove("nj-figma-submit--success")
                }, 1300), this.resetToEmail()
            }).catch(e => (this.is_submitting = !1, t.classList.remove("nj-figma-submit--loading"), this.NiceJob.send(r.a.click, {
                element: t,
                metadata: { ...this.event_metadata,
                    card: this.card,
                    type: "SUBMIT",
                    subtype: "ERROR",
                    error: "There was an error on our end. Please try again!",
                    error_type: "catch"
                }
            }), Object(c.a)({
                form: i.j + "--to",
                error: Object(d.a)({
                    namespace: "common",
                    key: "submit_error",
                    language: this.language
                }),
                modal: n
            })))
        }
        resetToEmail() {
            for (let e = 0; e < this.form.length; e++) {
                const t = this.form[e];
                "to_email" === t.name && (t.value = "")
            }
        }
    }
}, function(e, t, n) {
    e.exports = n(30)
}, function(e, t, n) {
    "use strict";
    n.r(t);
    var o = n(2),
        i = n(1),
        r = n(8),
        s = n(3),
        a = n(13);
    const c = [s.b, s.h, s.e, s.d, s.c, s.f],
        d = Object(i.i)();

    function l(e, t, n) {
        return new Promise((o, s) => {
            new Promise((e, t) => {
                const n = Object(r.b)();
                if (n.csrf_token) return e(n);
                let o = null,
                    i = setInterval(() => {
                        const t = Object(r.b)();
                        (null == t ? void 0 : t.csrf_token) ? (d && console.log("NiceJob.send() debug: Init request complete. Proceeding..."), e(t), i && (clearInterval(i), i = null), o && clearTimeout(o)) : d && console.log("NiceJob.send() debug: Awaiting init request...")
                    }, 20);
                o = setTimeout(() => {
                    i && (clearInterval(i), d && console.log("NiceJob.send() debug: Init request timed out."), t("NiceJob init request timed out."))
                }, 2e4)
            }).then(({
                session_id: l,
                pageview_id: _,
                csrf_token: u
            }) => {
                var m;
                const {
                    SDK_EVENT_URL: b,
                    company_id: p,
                    reviewly: f
                } = Object(r.a)(), {
                    element: E,
                    element_id: h,
                    element_classes: O,
                    element_data_attributes: g,
                    element_text_content: j,
                    element_href: A,
                    data: v,
                    metadata: R,
                    tags: T
                } = t, w = E ? Object(i.b)(E) : {};
                for (const e of c) delete w[e];
                const I = {
                    element_id: h || (null == E ? void 0 : E.id) || "",
                    element_classes: O || (E ? [...E.classList] : []),
                    element_data_attributes: g || w,
                    element_text_content: j || (null === (m = null == E ? void 0 : E.textContent) || void 0 === m ? void 0 : m.trim()) || "",
                    element_href: A || (null == E ? void 0 : E.href),
                    data: v || null,
                    metadata: R || {},
                    tags: T || []
                };
                "#" !== I.element_href && "javascript:void(0)" !== I.element_href || (I.element_href = "");
                const L = Object(a.a)(),
                    C = {
                        k: n,
                        c: p,
                        r: f,
                        s: l,
                        pv: _,
                        i: L,
                        e: e,
                        pl: I,
                        csrf: u
                    },
                    k = Date.now();
                d && console.log(`NiceJob.send() debug: Sending ${e} event [ ${k} ]...`), Object(i.l)({
                    body: C,
                    url: b
                }).then(({
                    success: n,
                    code: i,
                    error: r
                }) => {
                    if (!n) return console.error(`NiceJob.send("${e}") error [ ${i} ]: ${r}`, t), s(r);
                    d && console.log(`NiceJob.send() debug: ${e} event successfully created [ ${k} ].`), o({
                        success: n,
                        code: i
                    })
                }).catch(e => {
                    console.error("NiceJob.send() server error:", e), s(e)
                })
            }).catch(s)
        })
    }
    class _ {
        init(e) {
            if (!e || "string" != typeof e) throw new Error(`NiceJob.init() error: public_key must be a string. Received ${typeof e}.`);
            this[o.B] = e
        }
        async send(e, t) {
            const n = this[o.B];
            if (!n) throw new Error("NiceJob.send() error: Must call NiceJob.init() with company's public SDK key as argument before calling send().");
            if (!e) throw new Error("NiceJob.send() error: event_name argument required.");
            if (!t) throw new Error("NiceJob.send() error: payload argument required.");
            return this[o.c] && (t.metadata = { ...this[o.c],
                ...t.metadata
            }), await l(e, t, n)
        }
        setGlobalMetadata(e) {
            if (!e || "object" != typeof e) throw new Error(`NiceJob.setGlobalMetadata() error: metadata must be an Object. Received ${"object"!=typeof e?typeof e:"null"}.`);
            this[o.c] = e
        }
    }
    var u = n(17),
        m = n(10),
        b = n(19),
        p = n(18);
    const f = Object(i.i)();
    class E {
        constructor() {
            Object(i.j)();
            const {
                company_id: e,
                reviewly: t
            } = Object(r.a)();
            if (!e) throw new Error('NiceJob SDK failed to load: no id parameter appended to script src! (e.g. "https://cdn.nicejob.co/sdk.min.js?id=COMPANY_ID")');
            this.company_id = e, this.reviewly = t
        }
        async init() {
            if (this.session_id) return;
            const e = this.getUninstalledWidgets().some(e => e.request && e.request.widget === o.l);
            this.addWidgetLoadingStates();
            const {
                SDK_INIT_URL: t,
                redirect_url: n
            } = Object(r.a)(), s = {
                company_id: this.company_id,
                reviewly: this.reviewly,
                has_review_form: e,
                d: Object(a.a)()
            };
            f && console.log("NiceJob debug: Running init request...");
            const {
                session_id: c,
                pageview_id: d,
                csrf: l,
                nicejob_public_key: u,
                widget_settings: m,
                json_ld: E,
                snippets: h
            } = await Object(i.l)({
                body: s,
                url: t,
                with_credentials: !0
            });
            if (n) window.location.replace(n);
            else {
                if (!(c && d && l)) throw new Error("NiceJob init request failed.");
                f && console.log("NiceJob debug: Init request succeeded."), this.session_id = c, this.pageview_id = d, this.csrf_token = l, this.widget_settings = m, this.NiceJob = new _, this.NiceJob.init(u), Object(b.c)(h), Object(b.b)(E), Object(r.c)({
                    session_id: c,
                    pageview_id: d,
                    csrf_token: l
                }), "function" != typeof window.RESPONSIBID_CALLBACK && (window.RESPONSIBID_CALLBACK = function() {
                    Object(p.b)()
                })
            }
        }
        getUninstalledWidgets() {
            const e = Object(m.b)(!0);
            return e.sort((e, t) => e.request && e.request.widget === o.l ? -1 : t.request && t.request.widget === o.l ? 1 : 0), e
        }
        addWidgetLoadingStates() {
            Object(m.b)(!0).forEach(({
                element: e,
                request: t
            }) => {
                const {
                    widget: n
                } = t;
                Object(m.a)(e, n)
            })
        }
        async loadAllWidgets() {
            this.NiceJob || await this.init();
            const e = this.NiceJob;
            if (!e) throw new Error("NiceJob widget init error.");
            Object(u.a)(e);
            const {
                company_id: t,
                reviewly: n,
                widget_settings: o,
                session_id: i
            } = this, r = this.getUninstalledWidgets();
            await Promise.all(r.map((r, s) => new b.a({
                session_id: i,
                company_id: t,
                reviewly: n,
                installation: r,
                i: s,
                optimize_sort_order: !!(null == o ? void 0 : o.optimize_sort_order)
            }, e).install()))
        }
    }
    const h = new _;
    t.default = h;

    function O() {
        console.log("%cNiceJob SDK loaded", "color: white; background-color: green; font-family: sans-serif; padding: 2px 6px; border-radius: 4px"), (new E).loadAllWidgets()
    }
    window.NiceJob || (window.NiceJob = new _, window.NiceJobSDKv2 = O, O())
}])